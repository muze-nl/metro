(()=>{var v=Object.defineProperty;var O=(o,n)=>{for(var r in n)v(o,r,{get:n[r],enumerable:!0})};var p={};O(p,{client:()=>A,formdata:()=>R,metroError:()=>f,request:()=>b,response:()=>P,trace:()=>L,url:()=>d});var y="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var u=class o{#e={url:typeof window<"u"?window.location:"https://localhost"};#r=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...n){for(let r of n)if(typeof r=="string"||r instanceof String)this.#e.url=""+r;else if(r instanceof o)Object.assign(this.#e,r.#e);else if(r instanceof Function)this.#t([r]);else if(r&&typeof r=="object")for(let e in r)e=="middlewares"?this.#t(r[e]):typeof r[e]=="function"?this.#e[e]=r[e](this.#e[e],this.#e):this.#e[e]=r[e];this.#e.verbs&&(this.#r=this.#e.verbs,delete this.#e.verbs);for(let r of this.#r)this[r]=async function(...e){return this.fetch(b(this.#e,...e,{method:r.toUpperCase()}))};Object.freeze(this)}#t(n){typeof n=="function"&&(n=[n]);let r=n.findIndex(e=>typeof e!="function");if(r>=0)throw f("metro.client: middlewares must be a function or an array of functions "+y+"client/invalid-middlewares-value/",n[r]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(n)}fetch(n,r){if(n=b(n,r),!n.url)throw f("metro.client."+n.method.toLowerCase()+": Missing url parameter "+y+"client/missing-url-param/",n);if(r||(r={}),typeof r!="object"||Array.isArray(r)||r instanceof String)throw f("metro.client.fetch: Options is not an object");let t=[async function(a){if(a[Symbol.metroProxy])if(a.body&&a.body[Symbol.metroSource]){let h=a.body[Symbol.metroSource];a=new Request(a[Symbol.metroSource],{body:h})}else a=a[Symbol.metroSource];let l=await fetch(a);return P(l)}].concat(this.#e?.middlewares?.slice()||[]);r=Object.assign({},this.#e,r);let i;for(let s of t)i=function(a,l){return async function(h){let w,x=Object.values(o.tracers);for(let c of x)c.request&&c.request.call(c,h,l);w=await l(h,a);for(let c of x)c.response&&c.response.call(c,w,l);return w}}(i,s);return i(n)}with(...n){return new o(this,...n)}};function A(...o){return new u(...o)}function S(o,n){let r=n.body;return r||(o===null?r=new ReadableStream:o instanceof ReadableStream?r=o:o instanceof Blob?r=o.stream():r=new ReadableStream({start(e){let t;switch(typeof o){case"object":if(typeof o.toString=="function")t=o.toString();else if(o instanceof FormData)t=new URLSearchParams(o).toString();else if(o instanceof ArrayBuffer||ArrayBuffer.isView(o))t=o;else throw f("Cannot convert body to ReadableStream",o);break;case"string":case"number":case"boolean":t=o;break;default:throw f("Cannot convert body to ReadableStream",o)}e.enqueue(t),e.close()}})),new Proxy(r,{get(e,t,i){switch(t){case Symbol.metroProxy:return!0;case Symbol.metroSource:return o;case"toString":return function(){return""+o}}if(o&&typeof o=="object"&&t in o)return typeof o[t]=="function"?function(...s){return o[t].apply(o,s)}:o[t];if(t in e&&t!="toString")return typeof e[t]=="function"?function(...s){return e[t].apply(e,s)}:e[t]},has(e,t){return o&&typeof o=="object"?t in o:t in e},ownKeys(e){return Reflect.ownKeys(o&&typeof o=="object"?o:e)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(o&&typeof o=="object"?o:e,t)}})}function g(o,n){let r=n||{};!r.url&&n.url&&(r.url=n.url);for(let e of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let t=o[e];if(!(typeof t>"u"||t==null))if(t?.[Symbol.metroProxy]&&(t=t[Symbol.metroSource]),typeof t=="function")t(r[e],r);else if(e=="url")r.url=d(r.url,t);else if(e=="headers"){r.headers=new Headers(n.headers),t instanceof Headers||(t=new Headers(o.headers));for(let[i,s]of t.entries())r.headers.set(i,s)}else r[e]=t}return r}function b(...o){let n={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let t of o)typeof t=="string"||t instanceof URL||t instanceof URLSearchParams?n.url=d(n.url,t):t&&(t instanceof FormData||t instanceof ReadableStream||t instanceof Blob||t instanceof ArrayBuffer||t instanceof DataView)?n.body=t:t&&typeof t=="object"&&Object.assign(n,g(t,n));let r=n.body;r&&typeof r=="object"&&!(r instanceof String)&&!(r instanceof ReadableStream)&&!(r instanceof Blob)&&!(r instanceof ArrayBuffer)&&!(r instanceof DataView)&&!(r instanceof FormData)&&!(r instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(r instanceof TypedArray))&&(n.body=JSON.stringify(r));let e=new Request(n.url,n);return Object.freeze(e),new Proxy(e,{get(t,i,s){switch(i){case Symbol.metroSource:return t;case Symbol.metroProxy:return!0;case"with":return function(...a){return r&&a.unshift({body:r}),b(t,...a)};case"body":if(r||(r=t.body),r)return r[Symbol.metroProxy]?r:S(r,t);break}return t[i]instanceof Function?t[i].bind(t):t[i]}})}function j(o,n){let r=n||{};!r.url&&n.url&&(r.url=n.url);for(let e of["status","statusText","headers","body","url","type","redirected"]){let t=o[e];typeof t>"u"||t==null||(t?.[Symbol.metroProxy]&&(t=t[Symbol.metroSource]),typeof t=="function"?t(r[e],r):e=="url"?r.url=new URL(t,r.url||"https://localhost/"):r[e]=t)}return r}function P(...o){let n={};for(let e of o)typeof e=="string"?n.body=e:e instanceof Response?Object.assign(n,j(e,n)):e&&typeof e=="object"&&(e instanceof FormData||e instanceof Blob||e instanceof ArrayBuffer||e instanceof DataView||e instanceof ReadableStream||e instanceof URLSearchParams||e instanceof String||typeof TypedArray<"u"&&e instanceof TypedArray?n.body=e:Object.assign(n,j(e,n)));let r=new Response(n.body,n);return Object.freeze(r),new Proxy(r,{get(e,t,i){switch(t){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...s){return P(e,...s)};case"body":return n.body?n.body[Symbol.metroProxy]?n.body:S(n.body,e):S("",e);case"ok":return e.status>=200&&e.status<400;case"headers":return e.headers;default:if(t in n&&t!="toString")return n[t];if(t in e&&t!="toString")return typeof e[t]=="function"?function(...s){return e[t].apply(e,s)}:e[t];break}}})}function k(o,n){typeof n=="function"?n(o.searchParams,o):(n=new URLSearchParams(n),n.forEach((r,e)=>{o.searchParams.append(e,r)}))}function d(...o){let n=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],r=new URL("https://localhost/");for(let e of o)if(typeof e=="string"||e instanceof String)r=new URL(e,r);else if(e instanceof URL||typeof Location<"u"&&e instanceof Location)r=new URL(e);else if(e instanceof URLSearchParams)k(r,e);else if(e&&typeof e=="object")for(let t in e)if(t=="search")typeof e.search=="function"?e.search(r.search,r):r.search=new URLSearchParams(e.search);else if(t=="searchParams")k(r,e.searchParams);else{if(!n.includes(t))throw f("metro.url: unknown url parameter "+y+"url/unknown-param-name/",t);if(typeof e[t]=="function")e[t](r[t],r);else if(typeof e[t]=="string"||e[t]instanceof String||typeof e[t]=="number"||e[t]instanceof Number||typeof e[t]=="boolean"||e[t]instanceof Boolean)r[t]=""+e[t];else if(typeof e[t]=="object"&&e[t].toString)r[t]=e[t].toString();else throw f("metro.url: unsupported value for "+t+" "+y+"url/unsupported-param-value/",o[t])}else throw f("metro.url: unsupported option value "+y+"url/unsupported-option-value/",e);return Object.freeze(r),new Proxy(r,{get(e,t,i){switch(t){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...s){return d(e,...s)}}return e[t]instanceof Function?e[t].bind(e):e[t]}})}function R(...o){var n=new FormData;for(let r of o)if(r instanceof FormData)for(let e of r.entries())n.append(e[0],e[1]);else if(r&&typeof r=="object")for(let e of Object.entries(r))if(Array.isArray(e[1]))for(let t of e[1])n.append(e[0],t);else n.append(e[0],e[1]);else throw new f("metro.formdata: unknown option type, only FormData or Object supported",r);return Object.freeze(n),new Proxy(n,{get:(r,e,t)=>{switch(e){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"with":return function(...i){return R(r,...i)}}return r[e]instanceof Function?r[e].bind(r):r[e]}})}var m={error:(o,...n)=>{console.error("\u24C2\uFE0F  ",o,...n)},info:(o,...n)=>{console.info("\u24C2\uFE0F  ",o,...n)},group:o=>{console.group("\u24C2\uFE0F  "+o)},groupEnd:o=>{console.groupEnd("\u24C2\uFE0F  "+o)}};function f(o,...n){return m.error(o,...n),new Error(o,...n)}var L={add(o,n){u.tracers[o]=n},delete(o){delete u.tracers[o]},clear(){u.tracers={}},group(){let o=0;return{request:(n,r)=>{o++,m.group(o),m.info(n?.url,n,r)},response:(n,r)=>{m.info(n?.body?n.body[Symbol.metroSource]:null,n,r),m.groupEnd(o),o--}}}};globalThis.metro=p;var D=p;})();
//# sourceMappingURL=browser.min.js.map
