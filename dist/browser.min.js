(()=>{var v=Object.defineProperty;var A=(n,o)=>{for(var t in o)v(n,t,{get:o[t],enumerable:!0})};var b={};A(b,{Client:()=>u,client:()=>L,deepClone:()=>m,formdata:()=>R,metroError:()=>f,request:()=>y,response:()=>S,trace:()=>U,url:()=>h});var l="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var u=class n{clientOptions={url:typeof window<"u"?window.location:"https://localhost",verbs:["get","post","put","delete","patch","head","options","query"]};static tracers={};constructor(...o){for(let t of o)if(typeof t=="string"||t instanceof String)this.clientOptions.url=""+t;else if(t instanceof Function)this.#e([t]);else if(t&&typeof t=="object")for(let e in t)e=="middlewares"?this.#e(t[e]):typeof t[e]=="function"?this.clientOptions[e]=t[e](this.clientOptions[e],this.clientOptions):this.clientOptions[e]=t[e];for(let t of this.clientOptions.verbs)this[t]=async function(...e){return this.fetch(y(this.clientOptions,...e,{method:t.toUpperCase()}))}}#e(o){typeof o=="function"&&(o=[o]);let t=o.findIndex(e=>typeof e!="function");if(t>=0)throw f("metro.client: middlewares must be a function or an array of functions "+l+"client/invalid-middlewares/",o[t]);Array.isArray(this.clientOptions.middlewares)||(this.clientOptions.middlewares=[]),this.clientOptions.middlewares=this.clientOptions.middlewares.concat(o)}fetch(o,t){if(o=y(o,t),!o.url)throw f("metro.client."+o.method.toLowerCase()+": Missing url parameter "+l+"client/fetch-missing-url/",o);if(t||(t={}),typeof t!="object"||t instanceof String)throw f("metro.client.fetch: Invalid options parameter "+l+"client/fetch-invalid-options/",t);let r=[async function(a){a[Symbol.metroProxy]&&(a=a[Symbol.metroSource]);let p=await fetch(a);return S(p)}].concat(this.clientOptions?.middlewares?.slice()||[]);t=Object.assign({},this.clientOptions,t);let s;for(let i of r)s=function(a,p){return async function(P){let w,k=Object.values(n.tracers);for(let c of k)c.request&&c.request.call(c,P,p);w=await p(P,a);for(let c of k)c.response&&c.response.call(c,w,p);return w}}(s,i);return s(o)}with(...o){return new n(m(this.clientOptions),...o)}};function L(...n){return new u(...m(n))}function j(n,o){let t=o||{};!t.url&&o.url&&(t.url=o.url);for(let e of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let r=n[e];if(!(typeof r>"u"||r==null))if(r?.[Symbol.metroProxy]&&(r=r[Symbol.metroSource]),typeof r=="function")t[e]=r(t[e],t);else if(e=="url")t.url=h(t.url,r);else if(e=="headers"){t.headers=new Headers(o.headers),r instanceof Headers||(r=new Headers(n.headers));for(let[s,i]of r.entries())t.headers.set(s,i)}else t[e]=r}return n instanceof Request&&n.data&&(t.body=n.data),t}function y(...n){let o={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let r of n)typeof r=="string"||r instanceof URL||r instanceof URLSearchParams?o.url=h(o.url,r):r&&(r instanceof FormData||r instanceof ReadableStream||r instanceof Blob||r instanceof ArrayBuffer||r instanceof DataView)?o.body=r:r&&typeof r=="object"&&Object.assign(o,j(r,o));let t=new Request(o.url,o),e=o.body;return e&&typeof e=="object"&&!(e instanceof String)&&!(e instanceof ReadableStream)&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&!(e instanceof DataView)&&!(e instanceof FormData)&&!(e instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(e instanceof TypedArray))&&typeof e.toString=="function"&&(o.body=e.toString({headers:t.headers}),t=new Request(o.url,o)),Object.freeze(t),new Proxy(t,{get(r,s,i){switch(s){case Symbol.metroSource:return r;case Symbol.metroProxy:return!0;case"with":return function(...a){return e&&a.unshift({body:e}),y(r,...a)};case"data":return e}return r[s]instanceof Function?r[s].bind(r):r[s]}})}function x(n,o){let t=o||{};!t.url&&o.url&&(t.url=o.url);for(let e of["status","statusText","headers","body","url","type","redirected"]){let r=n[e];typeof r>"u"||r==null||(r?.[Symbol.metroProxy]&&(r=r[Symbol.metroSource]),typeof r=="function"?t[e]=r(t[e],t):e=="url"?t.url=new URL(r,t.url||"https://localhost/"):t[e]=r)}return n instanceof Response&&n.data&&(t.body=n.data),t}function S(...n){let o={};for(let r of n)typeof r=="string"?o.body=r:r instanceof Response?Object.assign(o,x(r,o)):r&&typeof r=="object"&&(r instanceof FormData||r instanceof Blob||r instanceof ArrayBuffer||r instanceof DataView||r instanceof ReadableStream||r instanceof URLSearchParams||r instanceof String||typeof TypedArray<"u"&&r instanceof TypedArray?o.body=r:Object.assign(o,x(r,o)));let t;o.body&&(t=o.body),[101,204,205,304].includes(o.status)&&(o.body=null);let e=new Response(o.body,o);return Object.freeze(e),new Proxy(e,{get(r,s,i){switch(s){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"with":return function(...a){return S(r,...a)};case"data":return t;case"ok":return r.status>=200&&r.status<400}return typeof r[s]=="function"?r[s].bind(r):r[s]}})}function O(n,o){typeof o=="function"?o(n.searchParams,n):(o=new URLSearchParams(o),o.forEach((t,e)=>{n.searchParams.append(e,t)}))}function h(...n){let o=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],t=new URL("https://localhost/");for(let e of n)if(typeof e=="string"||e instanceof String)t=new URL(e,t);else if(e instanceof URL||typeof Location<"u"&&e instanceof Location)t=new URL(e);else if(e instanceof URLSearchParams)O(t,e);else if(e&&typeof e=="object")for(let r in e)switch(r){case"search":typeof e.search=="function"?e.search(t.search,t):t.search=new URLSearchParams(e.search);break;case"searchParams":O(t,e.searchParams);break;default:if(!o.includes(r))throw f("metro.url: unknown url parameter "+l+"url/unknown-param-name/",r);if(typeof e[r]=="function")e[r](t[r],t);else if(typeof e[r]=="string"||e[r]instanceof String||typeof e[r]=="number"||e[r]instanceof Number||typeof e[r]=="boolean"||e[r]instanceof Boolean)t[r]=""+e[r];else if(typeof e[r]=="object"&&e[r].toString)t[r]=e[r].toString();else throw f("metro.url: unsupported value for "+r+" "+l+"url/unsupported-param-value/",n[r]);break}else throw f("metro.url: unsupported option value "+l+"url/unsupported-option-value/",e);return Object.freeze(t),new Proxy(t,{get(e,r,s){let i;switch(r){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...a){return h(e,...a)};case"filename":return e.pathname.split("/").pop();case"folderpath":return e.pathname.substring(0,e.pathname.lastIndexOf("\\")+1);case"authority":return i=e.username??"",i+=e.password?":"+e.password:"",i+=i?"@":"",i+=e.hostname,i+=e.port?":"+e.port:"",i+="/",i=e.protocol+"//"+i,i;break;case"origin":return i=e.protocol+"//"+e.hostname,i+=e.port?":"+e.port:"",i+="/",i;break;case"fragment":return e.hash.substring(1);case"scheme":return e.protocol?e.protocol.substring(0,e.protocol.length-1):""}return e[r]instanceof Function?e[r].bind(e):e[r]}})}function R(...n){var o=new FormData;for(let t of n)if(t instanceof HTMLFormElement&&(t=new FormData(t)),t instanceof FormData)for(let e of t.entries())o.append(e[0],e[1]);else if(t&&typeof t=="object")for(let e of Object.entries(t))if(Array.isArray(e[1]))for(let r of e[1])o.append(e[0],r);else o.append(e[0],e[1]);else throw new f("metro.formdata: unknown option type "+l+"formdata/unknown-option-value/",t);return Object.freeze(o),new Proxy(o,{get:(t,e,r)=>{switch(e){case Symbol.metroProxy:return!0;case Symbol.metroSource:return t;case"with":return function(...s){return R(t,...s)}}return t[e]instanceof Function?t[e].bind(t):t[e]}})}var d={error:(n,...o)=>{console.error("\u24C2\uFE0F  ",n,...o)},info:(n,...o)=>{console.info("\u24C2\uFE0F  ",n,...o)},group:n=>{console.group("\u24C2\uFE0F  "+n)},groupEnd:n=>{console.groupEnd("\u24C2\uFE0F  "+n)}};function f(n,...o){return d.error(n,...o),new Error(n,...o)}var U={add(n,o){u.tracers[n]=o},delete(n){delete u.tracers[n]},clear(){u.tracers={}},group(){let n=0;return{request:(o,t)=>{n++,d.group(n),d.info(o?.url,o,t)},response:(o,t)=>{d.info(o?.body?o.body[Symbol.metroSource]:null,o,t),d.groupEnd(n),n--}}}};function m(n){if(Array.isArray(n))return n.slice().map(m);if(n&&typeof n=="object")if(n.__proto__.constructor==Object||!n.__proto__){let o=Object.assign({},n);return Object.keys(o).forEach(t=>{o[t]=m(n[t])}),o}else return n;return n}globalThis.metro||(globalThis.metro=b);var E=b;})();
//# sourceMappingURL=browser.min.js.map
