(()=>{var v=Object.defineProperty;var L=(r,n)=>{for(var o in n)v(r,o,{get:n[o],enumerable:!0})};var b={};L(b,{Client:()=>p,client:()=>j,deepClone:()=>m,formdata:()=>R,metroError:()=>f,request:()=>y,response:()=>S,trace:()=>A,url:()=>l});var u="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var p=class r{clientOptions={url:l(typeof window<"u"?window.location:"https://localhost"),verbs:["get","post","put","delete","patch","head","options","query"]};static tracers={};constructor(...n){for(let o of n)if(typeof o=="string"||o instanceof String)this.clientOptions.url=l(this.clientOptions.url.href,o);else if(o instanceof r)Object.assign(this.clientOptions,o.clientOptions);else if(o instanceof Function)this.#e([o]);else if(o&&typeof o=="object")for(let e in o)e=="middlewares"?this.#e(o[e]):e=="url"?this.clientOptions.url=l(this.clientOptions.url.href,o[e]):typeof o[e]=="function"?this.clientOptions[e]=o[e](this.clientOptions[e],this.clientOptions):this.clientOptions[e]=o[e];for(let o of this.clientOptions.verbs)this[o]=async function(...e){return this.fetch(y(this.clientOptions,...e,{method:o.toUpperCase()}))}}#e(n){typeof n=="function"&&(n=[n]);let o=n.findIndex(e=>typeof e!="function");if(o>=0)throw f("metro.client: middlewares must be a function or an array of functions "+u+"client/invalid-middlewares/",n[o]);Array.isArray(this.clientOptions.middlewares)||(this.clientOptions.middlewares=[]),this.clientOptions.middlewares=this.clientOptions.middlewares.concat(n)}fetch(n,o){if(n=y(n,o),!n.url)throw f("metro.client."+n.method.toLowerCase()+": Missing url parameter "+u+"client/fetch-missing-url/",n);if(o||(o={}),typeof o!="object"||o instanceof String)throw f("metro.client.fetch: Invalid options parameter "+u+"client/fetch-invalid-options/",o);let t=[async function(a){a[Symbol.metroProxy]&&(a=a[Symbol.metroSource]);let d=await fetch(a);return S(d)}].concat(this.clientOptions?.middlewares?.slice()||[]);o=Object.assign({},this.clientOptions,o);let s;for(let i of t)s=function(a,d){return async function(O){let w,k=Object.values(r.tracers);for(let c of k)c.request&&c.request.call(c,O,d);w=await d(O,a);for(let c of k)c.response&&c.response.call(c,w,d);return w}}(s,i);return s(n)}with(...n){return new r(m(this.clientOptions),...n)}get location(){return this.clientOptions.url}};function j(...r){return new p(...m(r))}function U(r,n){let o=n||{};!o.url&&n.url&&(o.url=n.url);for(let e of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let t=r[e];if(!(typeof t>"u"||t==null))if(t?.[Symbol.metroProxy]&&(t=t[Symbol.metroSource]),typeof t=="function")o[e]=t(o[e],o);else if(e=="url")o.url=l(o.url,t);else if(e=="headers"){o.headers=new Headers(n.headers),t instanceof Headers||(t=new Headers(r.headers));for(let[s,i]of t.entries())o.headers.set(s,i)}else o[e]=t}return r instanceof Request&&r.data&&(o.body=r.data),o}function y(...r){let n={url:l(typeof window<"u"?window.location:"https://localhost/"),duplex:"half"};for(let t of r)typeof t=="string"||t instanceof URL||t instanceof URLSearchParams?n.url=l(n.url,t):t&&(t instanceof FormData||t instanceof ReadableStream||t instanceof Blob||t instanceof ArrayBuffer||t instanceof DataView)?n.body=t:t&&typeof t=="object"&&Object.assign(n,U(t,n));let o=new Request(n.url,n),e=n.body;return e&&typeof e=="object"&&!(e instanceof String)&&!(e instanceof ReadableStream)&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&!(e instanceof DataView)&&!(e instanceof FormData)&&!(e instanceof URLSearchParams)&&(typeof globalThis.TypedArray>"u"||!(e instanceof globalThis.TypedArray))&&typeof e.toString=="function"&&(n.body=e.toString({headers:o.headers}),o=new Request(n.url,n)),Object.freeze(o),new Proxy(o,{get(t,s){let i;switch(s){case Symbol.metroSource:i=t;break;case Symbol.metroProxy:i=!0;break;case"with":i=function(...a){return e&&a.unshift({body:e}),y(t,...a)};break;case"data":i=e;break;default:t[s]instanceof Function?i=t[s].bind(t):i=t[s];break}return i}})}function P(r,n){let o=n||{};!o.url&&n.url&&(o.url=n.url);for(let e of["status","statusText","headers","body","url","type","redirected"]){let t=r[e];typeof t>"u"||t==null||(t?.[Symbol.metroProxy]&&(t=t[Symbol.metroSource]),typeof t=="function"?o[e]=t(o[e],o):e=="url"?o.url=new URL(t,o.url||"https://localhost/"):o[e]=t)}return r instanceof Response&&r.data&&(o.body=r.data),o}function S(...r){let n={};for(let t of r)typeof t=="string"?n.body=t:t instanceof Response?Object.assign(n,P(t,n)):t&&typeof t=="object"&&(t instanceof FormData||t instanceof Blob||t instanceof ArrayBuffer||t instanceof DataView||t instanceof ReadableStream||t instanceof URLSearchParams||t instanceof String||typeof globalThis.TypedArray<"u"&&t instanceof globalThis.TypedArray?n.body=t:Object.assign(n,P(t,n)));let o;n.body&&(o=n.body),[101,204,205,304].includes(n.status)&&(n.body=null);let e=new Response(n.body,n);return Object.freeze(e),new Proxy(e,{get(t,s){let i;switch(s){case Symbol.metroProxy:i=!0;break;case Symbol.metroSource:i=t;break;case"with":i=function(...a){return S(t,...a)};break;case"data":i=o;break;case"ok":i=t.status>=200&&t.status<400;break;default:typeof t[s]=="function"?i=t[s].bind(t):i=t[s];break}return i}})}function x(r,n){typeof n=="function"?n(r.searchParams,r):(n=new URLSearchParams(n),n.forEach((o,e)=>{r.searchParams.append(e,o)}))}function l(...r){let n=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],o=new URL("https://localhost/");for(let e of r)if(typeof e=="string"||e instanceof String)o=new URL(e,o);else if(e instanceof URL||typeof Location<"u"&&e instanceof Location)o=new URL(e);else if(e instanceof URLSearchParams)x(o,e);else if(e&&typeof e=="object")for(let t in e)switch(t){case"search":typeof e.search=="function"?e.search(o.search,o):o.search=new URLSearchParams(e.search);break;case"searchParams":x(o,e.searchParams);break;default:if(!n.includes(t))throw f("metro.url: unknown url parameter "+u+"url/unknown-param-name/",t);if(typeof e[t]=="function")e[t](o[t],o);else if(typeof e[t]=="string"||e[t]instanceof String||typeof e[t]=="number"||e[t]instanceof Number||typeof e[t]=="boolean"||e[t]instanceof Boolean)o[t]=""+e[t];else if(typeof e[t]=="object"&&e[t].toString)o[t]=e[t].toString();else throw f("metro.url: unsupported value for "+t+" "+u+"url/unsupported-param-value/",r[t]);break}else throw f("metro.url: unsupported option value "+u+"url/unsupported-option-value/",e);return Object.freeze(o),new Proxy(o,{get(e,t){let s;switch(t){case Symbol.metroProxy:s=!0;break;case Symbol.metroSource:s=e;break;case"with":s=function(...i){return l(e,...i)};break;case"filename":s=e.pathname.split("/").pop();break;case"folderpath":s=e.pathname.substring(0,e.pathname.lastIndexOf("\\")+1);break;case"authority":s=e.username??"",s+=e.password?":"+e.password:"",s+=s?"@":"",s+=e.hostname,s+=e.port?":"+e.port:"",s+="/",s=e.protocol+"//"+s;break;case"origin":s=e.protocol+"//"+e.hostname,s+=e.port?":"+e.port:"",s+="/";break;case"fragment":s=e.hash.substring(1);break;case"scheme":e.protocol?s=e.protocol.substring(0,e.protocol.length-1):s="";break;default:e[t]instanceof Function?s=e[t].bind(e):s=e[t];break}return s}})}function R(...r){var n=new FormData;for(let o of r)if(o instanceof HTMLFormElement&&(o=new FormData(o)),o instanceof FormData)for(let e of o.entries())n.append(e[0],e[1]);else if(o&&typeof o=="object")for(let e of Object.entries(o))if(Array.isArray(e[1]))for(let t of e[1])n.append(e[0],t);else n.append(e[0],e[1]);else throw new f("metro.formdata: unknown option type "+u+"formdata/unknown-option-value/",o);return Object.freeze(n),new Proxy(n,{get(o,e){let t;switch(e){case Symbol.metroProxy:t=!0;break;case Symbol.metroSource:t=o;break;case"with":t=function(...s){return R(o,...s)};break;default:o[e]instanceof Function?t=o[e].bind(o):t=o[e];break}return t}})}var h={error:(r,...n)=>{console.error("\u24C2\uFE0F  ",r,...n)},info:(r,...n)=>{console.info("\u24C2\uFE0F  ",r,...n)},group:r=>{console.group("\u24C2\uFE0F  "+r)},groupEnd:r=>{console.groupEnd("\u24C2\uFE0F  "+r)}};function f(r,...n){return h.error(r,...n),new Error(r,...n)}var A={add(r,n){p.tracers[r]=n},delete(r){delete p.tracers[r]},clear(){p.tracers={}},group(){let r=0;return{request:(n,o)=>{r++,h.group(r),h.info(n?.url,n,o)},response:(n,o)=>{h.info(n?.body?n.body[Symbol.metroSource]:null,n,o),h.groupEnd(r),r--}}}};function m(r){if(Array.isArray(r))return r.slice().map(m);if(r&&typeof r=="object")if(r.__proto__.constructor==Object||!r.__proto__){let n=Object.assign({},r);return Object.keys(n).forEach(o=>{n[o]=m(r[o])}),n}else return r;return r}globalThis.metro||(globalThis.metro=b);var F=b;})();
//# sourceMappingURL=browser.min.js.map
