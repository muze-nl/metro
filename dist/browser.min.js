(()=>{var v=Object.defineProperty;var O=(t,o)=>{for(var r in o)v(t,r,{get:o[r],enumerable:!0})};var p={};O(p,{client:()=>A,formdata:()=>R,metroError:()=>f,request:()=>b,response:()=>P,trace:()=>L,url:()=>d});var y="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var u=class t{#e={url:typeof window<"u"?window.location:"https://localhost"};#r=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...o){for(let r of o)if(typeof r=="string"||r instanceof String)this.#e.url=""+r;else if(r instanceof t)Object.assign(this.#e,r.#e);else if(r instanceof Function)this.#t([r]);else if(r&&typeof r=="object")for(let e in r)e=="middlewares"?this.#t(r[e]):typeof r[e]=="function"?this.#e[e]=r[e](this.#e[e],this.#e):this.#e[e]=r[e];this.#e.verbs&&(this.#r=this.#e.verbs,delete this.#e.verbs);for(let r of this.#r)this[r]=async function(...e){return this.fetch(b(this.#e,...e,{method:r.toUpperCase()}))};Object.freeze(this)}#t(o){typeof o=="function"&&(o=[o]);let r=o.findIndex(e=>typeof e!="function");if(r>=0)throw f("metro.client: middlewares must be a function or an array of functions "+y+"client/invalid-middlewares-value/",o[r]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(o)}fetch(o,r){if(o=b(o,r),!o.url)throw f("metro.client."+o.method.toLowerCase()+": Missing url parameter "+y+"client/missing-url-param/",o);if(r||(r={}),typeof r!="object"||Array.isArray(r)||r instanceof String)throw f("metro.client.fetch: Options is not an object");let n=[async function(s){if(s[Symbol.metroProxy])if(s.body&&s.body[Symbol.metroSource]){let h=s.body[Symbol.metroSource];s=new Request(s[Symbol.metroSource],{body:h})}else s=s[Symbol.metroSource];let l=await fetch(s);return P(l)}].concat(this.#e?.middlewares?.slice()||[]);r=Object.assign({},this.#e,r);let i;for(let a of n)i=function(s,l){return async function(h){let w,j=Object.values(t.tracers);for(let c of j)c.request&&c.request.call(c,h,l);w=await l(h,s);for(let c of j)c.response&&c.response.call(c,w,l);return w}}(i,a);return i(o)}with(...o){return new t(this,...o)}};function A(...t){return new u(...t)}function S(t,o){let r=o.body;return r||(t===null?r=new ReadableStream:t instanceof ReadableStream?r=t:t instanceof Blob?r=t.stream():r=new ReadableStream({start(e){let n;switch(typeof t){case"object":if(typeof t.toString=="function")n=t.toString();else if(t instanceof FormData)n=new URLSearchParams(t).toString();else if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))n=t;else throw f("Cannot convert body to ReadableStream",t);break;case"string":case"number":case"boolean":n=t;break;default:throw f("Cannot convert body to ReadableStream",t)}e.enqueue(n),e.close()}})),new Proxy(r,{get(e,n,i){switch(n){case Symbol.metroProxy:return!0;case Symbol.metroSource:return t;case"toString":return function(){return""+t}}if(t&&typeof t=="object"&&n in t)return typeof t[n]=="function"?function(...a){return t[n].apply(t,a)}:t[n];if(n in e&&n!="toString")return typeof e[n]=="function"?function(...a){return e[n].apply(e,a)}:e[n]},has(e,n){return t&&typeof t=="object"?n in t:n in e},ownKeys(e){return Reflect.ownKeys(t&&typeof t=="object"?t:e)},getOwnPropertyDescriptor(e,n){return Object.getOwnPropertyDescriptor(t&&typeof t=="object"?t:e,n)}})}function g(t,o){let r=o||{};!r.url&&o.url&&(r.url=o.url);for(let e of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"])if(typeof t[e]=="function")t[e](r[e],r);else if(typeof t[e]<"u")if(e=="url")r.url=d(r.url,t.url);else if(e=="headers"){r.headers=new Headers(o.headers),t.headers instanceof Headers||(t.headers=new Headers(t.headers));for(let[n,i]of t.headers.entries())r.headers.set(n,i)}else r[e]=t[e];return r}function b(...t){let o={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let n of t)typeof n=="string"||n instanceof URL||n instanceof URLSearchParams?o.url=d(o.url,n):n&&(n instanceof FormData||n instanceof ReadableStream||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView)?o.body=n:n&&typeof n=="object"&&Object.assign(o,g(n,o));let r=o.body;r&&typeof r=="object"&&!(r instanceof String)&&!(r instanceof ReadableStream)&&!(r instanceof Blob)&&!(r instanceof ArrayBuffer)&&!(r instanceof DataView)&&!(r instanceof FormData)&&!(r instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(r instanceof TypedArray))&&(o.body=JSON.stringify(r));let e=new Request(o.url,o);return Object.freeze(e),new Proxy(e,{get(n,i,a){switch(i){case Symbol.metroSource:return n;case Symbol.metroProxy:return!0;case"with":return function(...s){return r&&s.unshift({body:r}),b(n,...s)};case"body":if(r||(r=n.body),r)return r[Symbol.metroProxy]?r:S(r,n);break}return n[i]instanceof Function?n[i].bind(n):n[i]}})}function k(t,o){let r=o||{};!r.url&&o.url&&(r.url=o.url);for(let e of["status","statusText","headers","body","url","type","redirected"])typeof t[e]=="function"?t[e](r[e],r):typeof t[e]<"u"&&(e=="url"?r.url=new URL(t.url,r.url||"https://localhost/"):r[e]=t[e]);return r}function P(...t){let o={};for(let e of t)typeof e=="string"?o.body=e:e instanceof Response?Object.assign(o,k(e,o)):e&&typeof e=="object"&&(e instanceof FormData||e instanceof Blob||e instanceof ArrayBuffer||e instanceof DataView||e instanceof ReadableStream||e instanceof URLSearchParams||e instanceof String||typeof TypedArray<"u"&&e instanceof TypedArray?o.body=e:Object.assign(o,k(e,o)));let r=new Response(o.body,o);return Object.freeze(r),new Proxy(r,{get(e,n,i){switch(n){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...a){return P(e,...a)};case"body":return o.body?o.body[Symbol.metroProxy]?o.body:S(o.body,e):S("",e);case"ok":return e.status>=200&&e.status<400;case"headers":return e.headers;default:if(n in o&&n!="toString")return o[n];if(n in e&&n!="toString")return typeof e[n]=="function"?function(...a){return e[n].apply(e,a)}:e[n];break}}})}function x(t,o){typeof o=="function"?o(t.searchParams,t):(o=new URLSearchParams(o),o.forEach((r,e)=>{t.searchParams.append(e,r)}))}function d(...t){let o=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],r=new URL("https://localhost/");for(let e of t)if(typeof e=="string"||e instanceof String)r=new URL(e,r);else if(e instanceof URL||typeof Location<"u"&&e instanceof Location)r=new URL(e);else if(e instanceof URLSearchParams)x(r,e);else if(e&&typeof e=="object")for(let n in e)if(n=="search")typeof e.search=="function"?e.search(r.search,r):r.search=new URLSearchParams(e.search);else if(n=="searchParams")x(r,e.searchParams);else{if(!o.includes(n))throw f("metro.url: unknown url parameter "+y+"url/unknown-param-name/",n);if(typeof e[n]=="function")e[n](r[n],r);else if(typeof e[n]=="string"||e[n]instanceof String||typeof e[n]=="number"||e[n]instanceof Number||typeof e[n]=="boolean"||e[n]instanceof Boolean)r[n]=""+e[n];else if(typeof e[n]=="object"&&e[n].toString)r[n]=e[n].toString();else throw f("metro.url: unsupported value for "+n+" "+y+"url/unsupported-param-value/",t[n])}else throw f("metro.url: unsupported option value "+y+"url/unsupported-option-value/",e);return Object.freeze(r),new Proxy(r,{get(e,n,i){switch(n){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...a){return d(e,...a)}}return e[n]instanceof Function?e[n].bind(e):e[n]}})}function R(...t){var o=new FormData;for(let r of t)if(r instanceof FormData)for(let e of r.entries())o.append(e[0],e[1]);else if(r&&typeof r=="object")for(let e of Object.entries(r))if(Array.isArray(e[1]))for(let n of e[1])o.append(e[0],n);else o.append(e[0],e[1]);else throw new f("metro.formdata: unknown option type, only FormData or Object supported",r);return Object.freeze(o),new Proxy(o,{get:(r,e,n)=>{switch(e){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"with":return function(...i){return R(r,...i)}}return r[e]instanceof Function?r[e].bind(r):r[e]}})}var m={error:(t,...o)=>{console.error("\u24C2\uFE0F  ",t,...o)},info:(t,...o)=>{console.info("\u24C2\uFE0F  ",t,...o)},group:t=>{console.group("\u24C2\uFE0F  "+t)},groupEnd:t=>{console.groupEnd("\u24C2\uFE0F  "+t)}};function f(t,...o){return m.error(t,...o),new Error(t,...o)}var L={add(t,o){u.tracers[t]=o},delete(t){delete u.tracers[t]},clear(){u.tracers={}},group(){let t=0;return{request:(o,r)=>{t++,m.group(t),m.info(o?.url,o,r)},response:(o,r)=>{m.info(o?.body?o.body[Symbol.metroSource]:null,o,r),m.groupEnd(t),t--}}}};globalThis.metro=p;var D=p;})();
//# sourceMappingURL=browser.min.js.map
