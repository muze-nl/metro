(()=>{var D=Object.defineProperty;var B=(r,n)=>{for(var e in n)D(r,e,{get:n[e],enumerable:!0})};var S={};B(S,{Client:()=>f,client:()=>P,deepClone:()=>u,formdata:()=>L,metroError:()=>c,request:()=>w,response:()=>R,trace:()=>z,url:()=>l});var m="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var f=class r{clientOptions={url:l(typeof window<"u"?window.location:"https://localhost"),verbs:["get","post","put","delete","patch","head","options","query"]};static tracers={};constructor(...n){for(let e of n)if(typeof e=="string"||e instanceof String)this.clientOptions.url=l(this.clientOptions.url.href,e);else if(e instanceof Function)this.#e([e]);else if(e&&typeof e=="object")for(let t in e)t=="middlewares"?this.#e(e[t]):t=="url"?this.clientOptions.url=l(this.clientOptions.url.href,e[t]):typeof e[t]=="function"?this.clientOptions[t]=e[t](this.clientOptions[t],this.clientOptions):this.clientOptions[t]=e[t];for(let e of this.clientOptions.verbs)this[e]=async function(...t){return this.fetch(w(this.clientOptions,...t,{method:e.toUpperCase()}))}}#e(n){typeof n=="function"&&(n=[n]);let e=n.findIndex(t=>typeof t!="function");if(e>=0)throw c("metro.client: middlewares must be a function or an array of functions "+m+"client/invalid-middlewares/",n[e]);Array.isArray(this.clientOptions.middlewares)||(this.clientOptions.middlewares=[]),this.clientOptions.middlewares=this.clientOptions.middlewares.concat(n)}fetch(n,e){if(n=w(n,e),!n.url)throw c("metro.client."+n.method.toLowerCase()+": Missing url parameter "+m+"client/fetch-missing-url/",n);if(e||(e={}),typeof e!="object"||e instanceof String)throw c("metro.client.fetch: Invalid options parameter "+m+"client/fetch-invalid-options/",e);let o=[async function(a){a[Symbol.metroProxy]&&(a=a[Symbol.metroSource]);let y=await fetch(a);return R(y)}].concat(this.clientOptions?.middlewares?.slice()||[]);e=Object.assign({},this.clientOptions,e);let i;for(let s of o)i=function(a,y){return async function(g){let k,v=Object.values(r.tracers);for(let p of v)p.request&&p.request.call(p,g,y);k=await y(g,a);for(let p of v)p.response&&p.response.call(p,k,y);return k}}(i,s);return i(n)}with(...n){return new r(u(this.clientOptions),...n)}get location(){return this.clientOptions.url}};function P(...r){return new f(...u(r))}function _(r,n){let e=n||{};!e.url&&n.url&&(e.url=n.url);for(let t of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let o=r[t];if(!(typeof o>"u"||o==null))if(o?.[Symbol.metroProxy]&&(o=o[Symbol.metroSource]),typeof o=="function")e[t]=o(e[t],e);else if(t=="url")e.url=l(e.url,o);else if(t=="headers"){e.headers=new Headers(n.headers),o instanceof Headers||(o=new Headers(r.headers));for(let[i,s]of o.entries())e.headers.set(i,s)}else e[t]=o}return r instanceof Request&&r.data&&(e.body=r.data),e}function w(...r){let n={url:l(typeof window<"u"?window.location:"https://localhost/"),duplex:"half"};for(let o of r)typeof o=="string"||o instanceof URL||o instanceof URLSearchParams?n.url=l(n.url,o):o&&(o instanceof FormData||o instanceof ReadableStream||o instanceof Blob||o instanceof ArrayBuffer||o instanceof DataView)?n.body=o:o&&typeof o=="object"&&Object.assign(n,_(o,n));let e=new Request(n.url,n),t=n.body;return t&&typeof t=="object"&&!(t instanceof String)&&!(t instanceof ReadableStream)&&!(t instanceof Blob)&&!(t instanceof ArrayBuffer)&&!(t instanceof DataView)&&!(t instanceof FormData)&&!(t instanceof URLSearchParams)&&(typeof globalThis.TypedArray>"u"||!(t instanceof globalThis.TypedArray))&&typeof t.toString=="function"&&(n.body=t.toString({headers:e.headers}),e=new Request(n.url,n)),Object.freeze(e),new Proxy(e,{get(o,i){let s;switch(i){case Symbol.metroSource:s=o;break;case Symbol.metroProxy:s=!0;break;case"with":s=function(...a){return t&&a.unshift({body:t}),w(o,...a)};break;case"data":s=t;break;default:o[i]instanceof Function?s=o[i].bind(o):s=o[i];break}return s}})}function T(r,n){let e=n||{};!e.url&&n.url&&(e.url=n.url);for(let t of["status","statusText","headers","body","url","type","redirected"]){let o=r[t];typeof o>"u"||o==null||(o?.[Symbol.metroProxy]&&(o=o[Symbol.metroSource]),typeof o=="function"?e[t]=o(e[t],e):t=="url"?e.url=new URL(o,e.url||"https://localhost/"):e[t]=o)}return r instanceof Response&&r.data&&(e.body=r.data),e}function R(...r){let n={};for(let o of r)typeof o=="string"?n.body=o:o instanceof Response?Object.assign(n,T(o,n)):o&&typeof o=="object"&&(o instanceof FormData||o instanceof Blob||o instanceof ArrayBuffer||o instanceof DataView||o instanceof ReadableStream||o instanceof URLSearchParams||o instanceof String||typeof globalThis.TypedArray<"u"&&o instanceof globalThis.TypedArray?n.body=o:Object.assign(n,T(o,n)));let e;n.body&&(e=n.body),[101,204,205,304].includes(n.status)&&(n.body=null);let t=new Response(n.body,n);return Object.freeze(t),new Proxy(t,{get(o,i){let s;switch(i){case Symbol.metroProxy:s=!0;break;case Symbol.metroSource:s=o;break;case"with":s=function(...a){return R(o,...a)};break;case"data":s=e;break;case"ok":s=o.status>=200&&o.status<400;break;default:typeof o[i]=="function"?s=o[i].bind(o):s=o[i];break}return s}})}function A(r,n){typeof n=="function"?n(r.searchParams,r):(n=new URLSearchParams(n),n.forEach((e,t)=>{r.searchParams.append(t,e)}))}function l(...r){let n=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],e=new URL("https://localhost/");for(let t of r)if(typeof t=="string"||t instanceof String)e=new URL(t,e);else if(t instanceof URL||typeof Location<"u"&&t instanceof Location)e=new URL(t);else if(t instanceof URLSearchParams)A(e,t);else if(t&&typeof t=="object")for(let o in t)switch(o){case"search":typeof t.search=="function"?t.search(e.search,e):e.search=new URLSearchParams(t.search);break;case"searchParams":A(e,t.searchParams);break;default:if(!n.includes(o))throw c("metro.url: unknown url parameter "+m+"url/unknown-param-name/",o);if(typeof t[o]=="function")t[o](e[o],e);else if(typeof t[o]=="string"||t[o]instanceof String||typeof t[o]=="number"||t[o]instanceof Number||typeof t[o]=="boolean"||t[o]instanceof Boolean)e[o]=""+t[o];else if(typeof t[o]=="object"&&t[o].toString)e[o]=t[o].toString();else throw c("metro.url: unsupported value for "+o+" "+m+"url/unsupported-param-value/",r[o]);break}else throw c("metro.url: unsupported option value "+m+"url/unsupported-option-value/",t);return Object.freeze(e),new Proxy(e,{get(t,o){let i;switch(o){case Symbol.metroProxy:i=!0;break;case Symbol.metroSource:i=t;break;case"with":i=function(...s){return l(t,...s)};break;case"filename":i=t.pathname.split("/").pop();break;case"folderpath":i=t.pathname.substring(0,t.pathname.lastIndexOf("\\")+1);break;case"authority":i=t.username??"",i+=t.password?":"+t.password:"",i+=i?"@":"",i+=t.hostname,i+=t.port?":"+t.port:"",i+="/",i=t.protocol+"//"+i;break;case"origin":i=t.protocol+"//"+t.hostname,i+=t.port?":"+t.port:"",i+="/";break;case"fragment":i=t.hash.substring(1);break;case"scheme":t.protocol?i=t.protocol.substring(0,t.protocol.length-1):i="";break;default:t[o]instanceof Function?i=t[o].bind(t):i=t[o];break}return i}})}function L(...r){var n=new FormData;for(let e of r)if(e instanceof HTMLFormElement&&(e=new FormData(e)),e instanceof FormData)for(let t of e.entries())n.append(t[0],t[1]);else if(e&&typeof e=="object")for(let t of Object.entries(e))if(Array.isArray(t[1]))for(let o of t[1])n.append(t[0],o);else n.append(t[0],t[1]);else throw new c("metro.formdata: unknown option type "+m+"formdata/unknown-option-value/",e);return Object.freeze(n),new Proxy(n,{get(e,t){let o;switch(t){case Symbol.metroProxy:o=!0;break;case Symbol.metroSource:o=e;break;case"with":o=function(...i){return L(e,...i)};break;default:e[t]instanceof Function?o=e[t].bind(e):o=e[t];break}return o}})}var b={error:(r,...n)=>{console.error("\u24C2\uFE0F  ",r,...n)},info:(r,...n)=>{console.info("\u24C2\uFE0F  ",r,...n)},group:r=>{console.group("\u24C2\uFE0F  "+r)},groupEnd:r=>{console.groupEnd("\u24C2\uFE0F  "+r)}};function c(r,...n){return b.error(r,...n),new Error(r,...n)}var z={add(r,n){f.tracers[r]=n},delete(r){delete f.tracers[r]},clear(){f.tracers={}},group(){let r=0;return{request:(n,e)=>{r++,b.group(r),b.info(n?.url,n,e)},response:(n,e)=>{b.info(n?.body?n.body[Symbol.metroSource]:null,n,e),b.groupEnd(r),r--}}}};function u(r){if(Array.isArray(r))return r.slice().map(u);if(r&&typeof r=="object")if(r.__proto__.constructor==Object||!r.__proto__){let n=Object.assign({},r);return Object.keys(n).forEach(e=>{n[e]=u(r[e])}),n}else return r;return r}function d(r){return r=Object.assign({contentType:"application/json",reviver:null,replacer:null,space:""},r),async function(e,t){if(e.headers.get("Accept")||(e=e.with({headers:{Accept:r.accept??r.contentType}})),e.method!=="GET"&&e.method!=="HEAD"&&e.data&&typeof e.data=="object"&&!(e.data instanceof ReadableStream)){let i=e.headers.get("Content-Type");(!i||N(i))&&(e=e.with({headers:{"Content-Type":r.contentType}})),U(e.headers.get("Content-Type"))&&(e=e.with({body:JSON.stringify(e.data,r.replacer,r.space)}))}let o=await t(e);if(U(o.headers.get("Content-Type"))){let s=await o.clone().text();try{let a=JSON.parse(s,r.reviver);return o.with({body:a})}catch{}}return o}}var H=/^application\/([a-zA-Z0-9\-_]+\+)?json\b/;function U(r){return H.exec(r)}function N(r){return/^text\/plain\b/.exec(r)}function h(r){return async function(e,t){let o=await t(e);if(!o.ok)if(r&&typeof r[o.status]=="function")o=r[o.status].apply(o,e);else throw new Error(o.status+": "+o.statusText,{cause:o});return o}}function x(){return async function(n,e){let t=await e(n);return t.ok&&t.data?t.data:t}}var O=class extends f{constructor(n,e,t=null){n instanceof f?super(n.clientOptions,h(),x()):super(n,h(),x()),t||(t=this);for(let o in e)typeof e[o]=="function"?this[o]=e[o].bind(t):e[o]&&typeof e[o]=="object"?this[o]=new this.constructor(n,e[o],t):this[o]=e[o]}},j=class extends O{constructor(n,e,t=null){n instanceof f?super(n.with(d()),e,t):super(P(n,d()),e,t)}};function C(...r){return new O(...u(r))}function E(...r){return new j(...u(r))}var F=Object.assign({},S,{mw:{json:d,thrower:h,gedata},api:C,jsonApi:E});globalThis.metro||(globalThis.metro=F);var $=F;})();
//# sourceMappingURL=everything.min.js.map
