(()=>{var D=Object.defineProperty;var B=(o,n)=>{for(var e in n)D(o,e,{get:n[e],enumerable:!0})};var S={};B(S,{Client:()=>c,client:()=>P,deepClone:()=>l,formdata:()=>g,metroError:()=>f,request:()=>b,response:()=>j,trace:()=>z,url:()=>w});var p="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var c=class o{clientOptions={url:typeof window<"u"?window.location:"https://localhost",verbs:["get","post","put","delete","patch","head","options","query"]};static tracers={};constructor(...n){for(let e of n)if(typeof e=="string"||e instanceof String)this.clientOptions.url=""+e;else if(e instanceof Function)this.#e([e]);else if(e&&typeof e=="object")for(let r in e)r=="middlewares"?this.#e(e[r]):typeof e[r]=="function"?this.clientOptions[r]=e[r](this.clientOptions[r],this.clientOptions):this.clientOptions[r]=e[r];for(let e of this.clientOptions.verbs)this[e]=async function(...r){return this.fetch(b(this.clientOptions,...r,{method:e.toUpperCase()}))}}#e(n){typeof n=="function"&&(n=[n]);let e=n.findIndex(r=>typeof r!="function");if(e>=0)throw f("metro.client: middlewares must be a function or an array of functions "+p+"client/invalid-middlewares/",n[e]);Array.isArray(this.clientOptions.middlewares)||(this.clientOptions.middlewares=[]),this.clientOptions.middlewares=this.clientOptions.middlewares.concat(n)}fetch(n,e){if(n=b(n,e),!n.url)throw f("metro.client."+n.method.toLowerCase()+": Missing url parameter "+p+"client/fetch-missing-url/",n);if(e||(e={}),typeof e!="object"||e instanceof String)throw f("metro.client.fetch: Invalid options parameter "+p+"client/fetch-invalid-options/",e);let t=[async function(s){s[Symbol.metroProxy]&&(s=s[Symbol.metroSource]);let y=await fetch(s);return j(y)}].concat(this.clientOptions?.middlewares?.slice()||[]);e=Object.assign({},this.clientOptions,e);let i;for(let a of t)i=function(s,y){return async function(v){let k,A=Object.values(o.tracers);for(let u of A)u.request&&u.request.call(u,v,y);k=await y(v,s);for(let u of A)u.response&&u.response.call(u,k,y);return k}}(i,a);return i(n)}with(...n){return new o(l(this.clientOptions),...n)}};function P(...o){return new c(...l(o))}function _(o,n){let e=n||{};!e.url&&n.url&&(e.url=n.url);for(let r of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let t=o[r];if(!(typeof t>"u"||t==null))if(t?.[Symbol.metroProxy]&&(t=t[Symbol.metroSource]),typeof t=="function")e[r]=t(e[r],e);else if(r=="url")e.url=w(e.url,t);else if(r=="headers"){e.headers=new Headers(n.headers),t instanceof Headers||(t=new Headers(o.headers));for(let[i,a]of t.entries())e.headers.set(i,a)}else e[r]=t}return o instanceof Request&&o.data&&(e.body=o.data),e}function b(...o){let n={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let t of o)typeof t=="string"||t instanceof URL||t instanceof URLSearchParams?n.url=w(n.url,t):t&&(t instanceof FormData||t instanceof ReadableStream||t instanceof Blob||t instanceof ArrayBuffer||t instanceof DataView)?n.body=t:t&&typeof t=="object"&&Object.assign(n,_(t,n));let e=new Request(n.url,n),r=n.body;return r&&typeof r=="object"&&!(r instanceof String)&&!(r instanceof ReadableStream)&&!(r instanceof Blob)&&!(r instanceof ArrayBuffer)&&!(r instanceof DataView)&&!(r instanceof FormData)&&!(r instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(r instanceof TypedArray))&&typeof r.toString=="function"&&(n.body=r.toString({headers:e.headers}),e=new Request(n.url,n)),Object.freeze(e),new Proxy(e,{get(t,i,a){switch(i){case Symbol.metroSource:return t;case Symbol.metroProxy:return!0;case"with":return function(...s){return r&&s.unshift({body:r}),b(t,...s)};case"data":return r}return t[i]instanceof Function?t[i].bind(t):t[i]}})}function T(o,n){let e=n||{};!e.url&&n.url&&(e.url=n.url);for(let r of["status","statusText","headers","body","url","type","redirected"]){let t=o[r];typeof t>"u"||t==null||(t?.[Symbol.metroProxy]&&(t=t[Symbol.metroSource]),typeof t=="function"?e[r]=t(e[r],e):r=="url"?e.url=new URL(t,e.url||"https://localhost/"):e[r]=t)}return o instanceof Response&&o.data&&(e.body=o.data),e}function j(...o){let n={};for(let t of o)typeof t=="string"?n.body=t:t instanceof Response?Object.assign(n,T(t,n)):t&&typeof t=="object"&&(t instanceof FormData||t instanceof Blob||t instanceof ArrayBuffer||t instanceof DataView||t instanceof ReadableStream||t instanceof URLSearchParams||t instanceof String||typeof TypedArray<"u"&&t instanceof TypedArray?n.body=t:Object.assign(n,T(t,n)));let e;n.body&&(e=n.body),[101,204,205,304].includes(n.status)&&(n.body=null);let r=new Response(n.body,n);return Object.freeze(r),new Proxy(r,{get(t,i,a){switch(i){case Symbol.metroProxy:return!0;case Symbol.metroSource:return t;case"with":return function(...s){return j(t,...s)};case"data":return e;case"ok":return t.status>=200&&t.status<400}return typeof t[i]=="function"?t[i].bind(t):t[i]}})}function L(o,n){typeof n=="function"?n(o.searchParams,o):(n=new URLSearchParams(n),n.forEach((e,r)=>{o.searchParams.append(r,e)}))}function w(...o){let n=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],e=new URL("https://localhost/");for(let r of o)if(typeof r=="string"||r instanceof String)e=new URL(r,e);else if(r instanceof URL||typeof Location<"u"&&r instanceof Location)e=new URL(r);else if(r instanceof URLSearchParams)L(e,r);else if(r&&typeof r=="object")for(let t in r)switch(t){case"search":typeof r.search=="function"?r.search(e.search,e):e.search=new URLSearchParams(r.search);break;case"searchParams":L(e,r.searchParams);break;default:if(!n.includes(t))throw f("metro.url: unknown url parameter "+p+"url/unknown-param-name/",t);if(typeof r[t]=="function")r[t](e[t],e);else if(typeof r[t]=="string"||r[t]instanceof String||typeof r[t]=="number"||r[t]instanceof Number||typeof r[t]=="boolean"||r[t]instanceof Boolean)e[t]=""+r[t];else if(typeof r[t]=="object"&&r[t].toString)e[t]=r[t].toString();else throw f("metro.url: unsupported value for "+t+" "+p+"url/unsupported-param-value/",o[t]);break}else throw f("metro.url: unsupported option value "+p+"url/unsupported-option-value/",r);return Object.freeze(e),new Proxy(e,{get(r,t,i){let a;switch(t){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"with":return function(...s){return w(r,...s)};case"filename":return r.pathname.split("/").pop();case"folderpath":return r.pathname.substring(0,r.pathname.lastIndexOf("\\")+1);case"authority":return a=r.username??"",a+=r.password?":"+r.password:"",a+=a?"@":"",a+=r.hostname,a+=r.port?":"+r.port:"",a+="/",a=r.protocol+"//"+a,a;break;case"origin":return a=r.protocol+"//"+r.hostname,a+=r.port?":"+r.port:"",a+="/",a;break;case"fragment":return r.hash.substring(1);case"scheme":return r.protocol?r.protocol.substring(0,r.protocol.length-1):""}return r[t]instanceof Function?r[t].bind(r):r[t]}})}function g(...o){var n=new FormData;for(let e of o)if(e instanceof HTMLFormElement&&(e=new FormData(e)),e instanceof FormData)for(let r of e.entries())n.append(r[0],r[1]);else if(e&&typeof e=="object")for(let r of Object.entries(e))if(Array.isArray(r[1]))for(let t of r[1])n.append(r[0],t);else n.append(r[0],r[1]);else throw new f("metro.formdata: unknown option type "+p+"formdata/unknown-option-value/",e);return Object.freeze(n),new Proxy(n,{get:(e,r,t)=>{switch(r){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...i){return g(e,...i)}}return e[r]instanceof Function?e[r].bind(e):e[r]}})}var h={error:(o,...n)=>{console.error("\u24C2\uFE0F  ",o,...n)},info:(o,...n)=>{console.info("\u24C2\uFE0F  ",o,...n)},group:o=>{console.group("\u24C2\uFE0F  "+o)},groupEnd:o=>{console.groupEnd("\u24C2\uFE0F  "+o)}};function f(o,...n){return h.error(o,...n),new Error(o,...n)}var z={add(o,n){c.tracers[o]=n},delete(o){delete c.tracers[o]},clear(){c.tracers={}},group(){let o=0;return{request:(n,e)=>{o++,h.group(o),h.info(n?.url,n,e)},response:(n,e)=>{h.info(n?.body?n.body[Symbol.metroSource]:null,n,e),h.groupEnd(o),o--}}}};function l(o){if(Array.isArray(o))return o.slice().map(l);if(o&&typeof o=="object")if(o.__proto__.constructor==Object||!o.__proto__){let n=Object.assign({},o);return Object.keys(n).forEach(e=>{n[e]=l(o[e])}),n}else return o;return o}function m(o){return o=Object.assign({contentType:"application/json",reviver:null,replacer:null,space:""},o),async function(e,r){if(e.headers.get("Accept")||(e=e.with({headers:{Accept:o.accept??o.contentType}})),e.method!=="GET"&&e.method!=="HEAD"&&e.data&&typeof e.data=="object"&&!(e.data instanceof ReadableStream)){let i=e.headers.get("Content-Type");(!i||N(i))&&(e=e.with({headers:{"Content-Type":o.contentType}})),E(e.headers.get("Content-Type"))&&(e=e.with({body:JSON.stringify(e.data,o.replacer,o.space)}))}let t=await r(e);if(E(t.headers.get("Content-Type"))){let a=await t.clone().text();try{let s=JSON.parse(a,o.reviver);return t.with({body:s})}catch{}}return t}}var H=/^application\/([a-zA-Z0-9\-_]+\+)?json\b/;function E(o){return H.exec(o)}function N(o){return/^text\/plain\b/.exec(o)}function d(o){return async function(e,r){let t=await r(e);if(!t.ok)if(o&&typeof o[t.status]=="function")t=o[t.status].apply(t,e);else throw new Error(t.status+": "+t.statusText,{cause:t});return t}}function x(o){return async function(e,r){let t=await r(e);return t.ok&&t.data?t.data:t}}var O=class extends c{constructor(n,e,r=null){n instanceof c?super(n.clientOptions,d(),x()):super(n,d(),x()),r||(r=this);for(let t in e)typeof e[t]=="function"?this[t]=e[t].bind(r):e[t]&&typeof e[t]=="object"?this[t]=new this.constructor(n,e[t],r):this[t]=e[t]}},R=class extends O{constructor(n,e,r=null){n instanceof c?super(n.with(m()),e,r):super(P(n,m()),e,r)}};function U(...o){return new O(...l(o))}function C(...o){return new R(...l(o))}var F=Object.assign({},S,{mw:{jsonmw:m,thrower:d},api:U,jsonApi:C});globalThis.metro||(globalThis.metro=F);var $=F;})();
//# sourceMappingURL=everything.min.js.map
