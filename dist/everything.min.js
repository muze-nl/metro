(()=>{var E=Object.defineProperty;var T=(n,o)=>{for(var e in o)E(n,e,{get:o[e],enumerable:!0})};var w={};T(w,{Client:()=>f,client:()=>F,deepClone:()=>p,formdata:()=>L,metroError:()=>c,request:()=>h,response:()=>x,trace:()=>C,url:()=>b});var u="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var f=class n{clientOptions={url:typeof window<"u"?window.location:"https://localhost",verbs:["get","post","put","delete","patch","head","options","query"]};static tracers={};constructor(...o){for(let e of o)if(typeof e=="string"||e instanceof String)this.clientOptions.url=""+e;else if(e instanceof Function)this.#e([e]);else if(e&&typeof e=="object")for(let t in e)t=="middlewares"?this.#e(e[t]):typeof e[t]=="function"?this.clientOptions[t]=e[t](this.clientOptions[t],this.clientOptions):this.clientOptions[t]=e[t];for(let e of this.clientOptions.verbs)this[e]=async function(...t){return this.fetch(h(this.clientOptions,...t,{method:e.toUpperCase()}))}}#e(o){typeof o=="function"&&(o=[o]);let e=o.findIndex(t=>typeof t!="function");if(e>=0)throw c("metro.client: middlewares must be a function or an array of functions "+u+"client/invalid-middlewares/",o[e]);Array.isArray(this.clientOptions.middlewares)||(this.clientOptions.middlewares=[]),this.clientOptions.middlewares=this.clientOptions.middlewares.concat(o)}fetch(o,e){if(o=h(o,e),!o.url)throw c("metro.client."+o.method.toLowerCase()+": Missing url parameter "+u+"client/fetch-missing-url/",o);if(e||(e={}),typeof e!="object"||e instanceof String)throw c("metro.client.fetch: Invalid options parameter "+u+"client/fetch-invalid-options/",e);let r=[async function(s){s[Symbol.metroProxy]&&(s=s[Symbol.metroSource]);let m=await fetch(s);return x(m)}].concat(this.clientOptions?.middlewares?.slice()||[]);e=Object.assign({},this.clientOptions,e);let a;for(let i of r)a=function(s,m){return async function(R){let S,v=Object.values(n.tracers);for(let l of v)l.request&&l.request.call(l,R,m);S=await m(R,s);for(let l of v)l.response&&l.response.call(l,S,m);return S}}(a,i);return a(o)}with(...o){return new n(p(this.clientOptions),...o)}};function F(...n){return new f(...p(n))}function D(n,o){let e=o||{};!e.url&&o.url&&(e.url=o.url);for(let t of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]){let r=n[t];if(!(typeof r>"u"||r==null))if(r?.[Symbol.metroProxy]&&(r=r[Symbol.metroSource]),typeof r=="function")e[t]=r(e[t],e);else if(t=="url")e.url=b(e.url,r);else if(t=="headers"){e.headers=new Headers(o.headers),r instanceof Headers||(r=new Headers(n.headers));for(let[a,i]of r.entries())e.headers.set(a,i)}else e[t]=r}return n instanceof Request&&n.data&&(e.body=n.data),e}function h(...n){let o={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let r of n)typeof r=="string"||r instanceof URL||r instanceof URLSearchParams?o.url=b(o.url,r):r&&(r instanceof FormData||r instanceof ReadableStream||r instanceof Blob||r instanceof ArrayBuffer||r instanceof DataView)?o.body=r:r&&typeof r=="object"&&Object.assign(o,D(r,o));let e=new Request(o.url,o),t=o.body;return t&&typeof t=="object"&&!(t instanceof String)&&!(t instanceof ReadableStream)&&!(t instanceof Blob)&&!(t instanceof ArrayBuffer)&&!(t instanceof DataView)&&!(t instanceof FormData)&&!(t instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(t instanceof TypedArray))&&typeof t.toString=="function"&&(o.body=t.toString({headers:e.headers}),e=new Request(o.url,o)),Object.freeze(e),new Proxy(e,{get(r,a,i){switch(a){case Symbol.metroSource:return r;case Symbol.metroProxy:return!0;case"with":return function(...s){return t&&s.unshift({body:t}),h(r,...s)};case"data":return t}return r[a]instanceof Function?r[a].bind(r):r[a]}})}function j(n,o){let e=o||{};!e.url&&o.url&&(e.url=o.url);for(let t of["status","statusText","headers","body","url","type","redirected"]){let r=n[t];typeof r>"u"||r==null||(r?.[Symbol.metroProxy]&&(r=r[Symbol.metroSource]),typeof r=="function"?e[t]=r(e[t],e):t=="url"?e.url=new URL(r,e.url||"https://localhost/"):e[t]=r)}return n instanceof Response&&n.data&&(e.body=n.data),e}function x(...n){let o={};for(let r of n)typeof r=="string"?o.body=r:r instanceof Response?Object.assign(o,j(r,o)):r&&typeof r=="object"&&(r instanceof FormData||r instanceof Blob||r instanceof ArrayBuffer||r instanceof DataView||r instanceof ReadableStream||r instanceof URLSearchParams||r instanceof String||typeof TypedArray<"u"&&r instanceof TypedArray?o.body=r:Object.assign(o,j(r,o)));let e;o.body&&(e=o.body),[101,204,205,304].includes(o.status)&&(o.body=null);let t=new Response(o.body,o);return Object.freeze(t),new Proxy(t,{get(r,a,i){switch(a){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"with":return function(...s){return x(r,...s)};case"data":return e;case"ok":return r.status>=200&&r.status<400}return typeof r[a]=="function"?r[a].bind(r):r[a]}})}function A(n,o){typeof o=="function"?o(n.searchParams,n):(o=new URLSearchParams(o),o.forEach((e,t)=>{n.searchParams.append(t,e)}))}function b(...n){let o=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],e=new URL("https://localhost/");for(let t of n)if(typeof t=="string"||t instanceof String)e=new URL(t,e);else if(t instanceof URL||typeof Location<"u"&&t instanceof Location)e=new URL(t);else if(t instanceof URLSearchParams)A(e,t);else if(t&&typeof t=="object")for(let r in t)switch(r){case"search":typeof t.search=="function"?t.search(e.search,e):e.search=new URLSearchParams(t.search);break;case"searchParams":A(e,t.searchParams);break;default:if(!o.includes(r))throw c("metro.url: unknown url parameter "+u+"url/unknown-param-name/",r);if(typeof t[r]=="function")t[r](e[r],e);else if(typeof t[r]=="string"||t[r]instanceof String||typeof t[r]=="number"||t[r]instanceof Number||typeof t[r]=="boolean"||t[r]instanceof Boolean)e[r]=""+t[r];else if(typeof t[r]=="object"&&t[r].toString)e[r]=t[r].toString();else throw c("metro.url: unsupported value for "+r+" "+u+"url/unsupported-param-value/",n[r]);break}else throw c("metro.url: unsupported option value "+u+"url/unsupported-option-value/",t);return Object.freeze(e),new Proxy(e,{get(t,r,a){let i;switch(r){case Symbol.metroProxy:return!0;case Symbol.metroSource:return t;case"with":return function(...s){return b(t,...s)};case"filename":return t.pathname.split("/").pop();case"folderpath":return t.pathname.substring(0,t.pathname.lastIndexOf("\\")+1);case"authority":return i=t.username??"",i+=t.password?":"+t.password:"",i+=i?"@":"",i+=t.hostname,i+=t.port?":"+t.port:"",i+="/",i=t.protocol+"//"+i,i;break;case"origin":return i=t.protocol+"//"+t.hostname,i+=t.port?":"+t.port:"",i+="/",i;break;case"fragment":return t.hash.substring(1);case"scheme":return t.protocol?t.protocol.substring(0,t.protocol.length-1):""}return t[r]instanceof Function?t[r].bind(t):t[r]}})}function L(...n){var o=new FormData;for(let e of n)if(e instanceof HTMLFormElement&&(e=new FormData(e)),e instanceof FormData)for(let t of e.entries())o.append(t[0],t[1]);else if(e&&typeof e=="object")for(let t of Object.entries(e))if(Array.isArray(t[1]))for(let r of t[1])o.append(t[0],r);else o.append(t[0],t[1]);else throw new c("metro.formdata: unknown option type "+u+"formdata/unknown-option-value/",e);return Object.freeze(o),new Proxy(o,{get:(e,t,r)=>{switch(t){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...a){return L(e,...a)}}return e[t]instanceof Function?e[t].bind(e):e[t]}})}var d={error:(n,...o)=>{console.error("\u24C2\uFE0F  ",n,...o)},info:(n,...o)=>{console.info("\u24C2\uFE0F  ",n,...o)},group:n=>{console.group("\u24C2\uFE0F  "+n)},groupEnd:n=>{console.groupEnd("\u24C2\uFE0F  "+n)}};function c(n,...o){return d.error(n,...o),new Error(n,...o)}var C={add(n,o){f.tracers[n]=o},delete(n){delete f.tracers[n]},clear(){f.tracers={}},group(){let n=0;return{request:(o,e)=>{n++,d.group(n),d.info(o?.url,o,e)},response:(o,e)=>{d.info(o?.body?o.body[Symbol.metroSource]:null,o,e),d.groupEnd(n),n--}}}};function p(n){if(Array.isArray(n))return n.slice().map(p);if(n&&typeof n=="object")if(n.__proto__.constructor==Object||!n.__proto__){let o=Object.assign({},n);return Object.keys(o).forEach(e=>{o[e]=p(n[e])}),o}else return n;return n}function y(n){return n=Object.assign({mimetype:"application/json",reviver:null,replacer:null,space:""},n),async function(e,t){O(e.headers.get("Accept"))||(e=e.with({headers:{Accept:n.mimetype}})),["POST","PUT","PATCH","QUERY"].includes(e.method)&&e.data&&typeof e.data=="object"&&!(e.data instanceof ReadableStream)&&(O(e.headers.get("content-type"))||(e=e.with({headers:{"Content-Type":n.mimetype}})),e=e.with({body:JSON.stringify(e.data,n.replacer,n.space)}));let r=await t(e);if(O(r.headers.get("content-type"))){let i=await r.clone().text();try{let s=JSON.parse(i,n.reviver);return r.with({body:s})}catch{}}return r}}var B=/^application\/([a-zA-Z0-9\-_]+\+)?json\b/;function O(n){return B.exec(n)}function P(n){return async function(e,t){let r=await t(e);if(!r.ok)if(n&&typeof n[r.status]=="function")r=n[r.status].apply(r,e);else throw new Error(r.status+": "+r.statusText,{cause:r});return r}}var k=class extends f{constructor(o,e){let t=async(r,a)=>{let i=await a(r);return i.ok&&i.data?i.data:i};typeof o=="string"?super(o,y(),throwermw(),t):o instanceof f?super(o.clientOptions,t):super(o,t);for(let r in e)typeof e[r]=="function"&&(this[r]=e[r].bind(this))}};function U(...n){return new k(...p(n))}var g=Object.assign({},w,{mw:{jsonmw:y,thrower:P},api:U});globalThis.metro||(globalThis.metro=g);var Q=g;})();
//# sourceMappingURL=everything.min.js.map
