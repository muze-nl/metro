(()=>{var L=Object.defineProperty;var U=(r,n)=>{for(var t in n)L(r,t,{get:n[t],enumerable:!0})};var j={};U(j,{client:()=>D,formdata:()=>g,metroError:()=>f,request:()=>b,response:()=>P,trace:()=>S,url:()=>d});var y="https://metro.muze.nl/details/";Symbol.metroProxy||(Symbol.metroProxy=Symbol("isProxy"));Symbol.metroSource||(Symbol.metroSource=Symbol("source"));var u=class r{#e={url:typeof window<"u"?window.location:"https://localhost"};#t=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...n){for(let t of n)if(typeof t=="string"||t instanceof String)this.#e.url=""+t;else if(t instanceof r)Object.assign(this.#e,t.#e);else if(t instanceof Function)this.#r([t]);else if(t&&typeof t=="object")for(let e in t)e=="middlewares"?this.#r(t[e]):typeof t[e]=="function"?this.#e[e]=t[e](this.#e[e],this.#e):this.#e[e]=t[e];this.#e.verbs&&(this.#t=this.#e.verbs,delete this.#e.verbs);for(let t of this.#t)this[t]=async function(...e){return this.fetch(b(this.#e,...e,{method:t.toUpperCase()}))};Object.freeze(this)}#r(n){typeof n=="function"&&(n=[n]);let t=n.findIndex(e=>typeof e!="function");if(t>=0)throw f("metro.client: middlewares must be a function or an array of functions "+y+"client/invalid-middlewares-value/",n[t]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(n)}fetch(n,t){if(n=b(n,t),!n.url)throw f("metro.client."+n.method.toLowerCase()+": Missing url parameter "+y+"client/missing-url-param/",n);if(t||(t={}),typeof t!="object"||Array.isArray(t)||t instanceof String)throw f("metro.client.fetch: Options is not an object");let o=[async function(a){if(a[Symbol.metroProxy])if(a.body&&a.body[Symbol.metroSource]){let h=a.body[Symbol.metroSource];a=new Request(a[Symbol.metroSource],{body:h})}else a=a[Symbol.metroSource];let l=await fetch(a);return P(l)}].concat(this.#e?.middlewares?.slice()||[]);t=Object.assign({},this.#e,t);let i;for(let s of o)i=function(a,l){return async function(h){let p,R=Object.values(r.tracers);for(let c of R)c.request&&c.request.call(c,h,l);p=await l(h,a);for(let c of R)c.response&&c.response.call(c,p,l);return p}}(i,s);return i(n)}with(...n){return new r(this,...n)}};function D(...r){return new u(...r)}function w(r,n){let t=n.body;return t||(r===null?t=new ReadableStream:r instanceof ReadableStream?t=r:r instanceof Blob?t=r.stream():t=new ReadableStream({start(e){let o;switch(typeof r){case"object":if(typeof r.toString=="function")o=r.toString();else if(r instanceof FormData)o=new URLSearchParams(r).toString();else if(r instanceof ArrayBuffer||ArrayBuffer.isView(r))o=r;else throw f("Cannot convert body to ReadableStream",r);break;case"string":case"number":case"boolean":o=r;break;default:throw f("Cannot convert body to ReadableStream",r)}e.enqueue(o),e.close()}})),new Proxy(t,{get(e,o,i){switch(o){case Symbol.metroProxy:return!0;case Symbol.metroSource:return r;case"toString":return function(){return""+r}}if(r&&typeof r=="object"&&o in r)return typeof r[o]=="function"?function(...s){return r[o].apply(r,s)}:r[o];if(o in e&&o!="toString")return typeof e[o]=="function"?function(...s){return e[o].apply(e,s)}:e[o]},has(e,o){return r&&typeof r=="object"?o in r:o in e},ownKeys(e){return Reflect.ownKeys(r&&typeof r=="object"?r:e)},getOwnPropertyDescriptor(e,o){return Object.getOwnPropertyDescriptor(r&&typeof r=="object"?r:e,o)}})}function F(r,n){let t=n||{};!t.url&&n.url&&(t.url=n.url);for(let e of["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"])if(typeof r[e]=="function")r[e](t[e],t);else if(typeof r[e]<"u")if(e=="url")t.url=d(t.url,r.url);else if(e=="headers"){t.headers=new Headers(n.headers),r.headers instanceof Headers||(r.headers=new Headers(r.headers));for(let[o,i]of r.headers.entries())t.headers.set(o,i)}else t[e]=r[e];return t}function b(...r){let n={url:typeof window<"u"?window.location:"https://localhost/",duplex:"half"};for(let o of r)typeof o=="string"||o instanceof URL||o instanceof URLSearchParams?n.url=d(n.url,o):o&&(o instanceof FormData||o instanceof ReadableStream||o instanceof Blob||o instanceof ArrayBuffer||o instanceof DataView)?n.body=o:o&&typeof o=="object"&&Object.assign(n,F(o,n));let t=n.body;t&&typeof t=="object"&&!(t instanceof String)&&!(t instanceof ReadableStream)&&!(t instanceof Blob)&&!(t instanceof ArrayBuffer)&&!(t instanceof DataView)&&!(t instanceof FormData)&&!(t instanceof URLSearchParams)&&(typeof TypedArray>"u"||!(t instanceof TypedArray))&&(n.body=JSON.stringify(t));let e=new Request(n.url,n);return Object.freeze(e),new Proxy(e,{get(o,i,s){switch(i){case Symbol.metroSource:return o;case Symbol.metroProxy:return!0;case"with":return function(...a){return t&&a.unshift({body:t}),b(o,...a)};case"body":if(t||(t=o.body),t)return t[Symbol.metroProxy]?t:w(t,o);break}return o[i]instanceof Function?o[i].bind(o):o[i]}})}function v(r,n){let t=n||{};!t.url&&n.url&&(t.url=n.url);for(let e of["status","statusText","headers","body","url","type","redirected"])typeof r[e]=="function"?r[e](t[e],t):typeof r[e]<"u"&&(e=="url"?t.url=new URL(r.url,t.url||"https://localhost/"):t[e]=r[e]);return t}function P(...r){let n={};for(let e of r)typeof e=="string"?n.body=e:e instanceof Response?Object.assign(n,v(e,n)):e&&typeof e=="object"&&(e instanceof FormData||e instanceof Blob||e instanceof ArrayBuffer||e instanceof DataView||e instanceof ReadableStream||e instanceof URLSearchParams||e instanceof String||typeof TypedArray<"u"&&e instanceof TypedArray?n.body=e:Object.assign(n,v(e,n)));let t=new Response(n.body,n);return Object.freeze(t),new Proxy(t,{get(e,o,i){switch(o){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...s){return P(e,...s)};case"body":return n.body?n.body[Symbol.metroProxy]?n.body:w(n.body,e):w("",e);case"ok":return e.status>=200&&e.status<400;case"headers":return e.headers;default:if(o in n&&o!="toString")return n[o];if(o in e&&o!="toString")return typeof e[o]=="function"?function(...s){return e[o].apply(e,s)}:e[o];break}}})}function O(r,n){typeof n=="function"?n(r.searchParams,r):(n=new URLSearchParams(n),n.forEach((t,e)=>{r.searchParams.append(e,t)}))}function d(...r){let n=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],t=new URL("https://localhost/");for(let e of r)if(typeof e=="string"||e instanceof String)t=new URL(e,t);else if(e instanceof URL||typeof Location<"u"&&e instanceof Location)t=new URL(e);else if(e instanceof URLSearchParams)O(t,e);else if(e&&typeof e=="object")for(let o in e)if(o=="search")typeof e.search=="function"?e.search(t.search,t):t.search=new URLSearchParams(e.search);else if(o=="searchParams")O(t,e.searchParams);else{if(!n.includes(o))throw f("metro.url: unknown url parameter "+y+"url/unknown-param-name/",o);if(typeof e[o]=="function")e[o](t[o],t);else if(typeof e[o]=="string"||e[o]instanceof String||typeof e[o]=="number"||e[o]instanceof Number||typeof e[o]=="boolean"||e[o]instanceof Boolean)t[o]=""+e[o];else if(typeof e[o]=="object"&&e[o].toString)t[o]=e[o].toString();else throw f("metro.url: unsupported value for "+o+" "+y+"url/unsupported-param-value/",r[o])}else throw f("metro.url: unsupported option value "+y+"url/unsupported-option-value/",e);return Object.freeze(t),new Proxy(t,{get(e,o,i){switch(o){case Symbol.metroProxy:return!0;case Symbol.metroSource:return e;case"with":return function(...s){return d(e,...s)}}return e[o]instanceof Function?e[o].bind(e):e[o]}})}function g(...r){var n=new FormData;for(let t of r)if(t instanceof FormData)for(let e of t.entries())n.append(e[0],e[1]);else if(t&&typeof t=="object")for(let e of Object.entries(t))if(Array.isArray(e[1]))for(let o of e[1])n.append(e[0],o);else n.append(e[0],e[1]);else throw new f("metro.formdata: unknown option type, only FormData or Object supported",t);return Object.freeze(n),new Proxy(n,{get:(t,e,o)=>{switch(e){case Symbol.metroProxy:return!0;case Symbol.metroSource:return t;case"with":return function(...i){return g(t,...i)}}return t[e]instanceof Function?t[e].bind(t):t[e]}})}var m={error:(r,...n)=>{console.error("\u24C2\uFE0F  ",r,...n)},info:(r,...n)=>{console.info("\u24C2\uFE0F  ",r,...n)},group:r=>{console.group("\u24C2\uFE0F  "+r)},groupEnd:r=>{console.groupEnd("\u24C2\uFE0F  "+r)}};function f(r,...n){return m.error(r,...n),new Error(r,...n)}var S={add(r,n){u.tracers[r]=n},delete(r){delete u.tracers[r]},clear(){u.tracers={}},group(){let r=0;return{request:(n,t)=>{r++,m.group(r),m.info(n?.url,n,t)},response:(n,t)=>{m.info(n?.body?n.body[Symbol.metroSource]:null,n,t),m.groupEnd(r),r--}}}};S.add("group",S.group());function x(r){return r=Object.assign({reviver:null,replacer:null,space:""},r),async(n,t)=>{["POST","PUT","PATCH","QUERY"].includes(n.method)?(n=n.with({headers:{"Content-Type":"application/json",Accept:"application/json"}}),n.body&&typeof n.body[Symbol.metroSource]=="object"&&(n=n.with({body:JSON.stringify(n.body[Symbol.metroSource],r.replacer,r.space)}))):n=n.with({headers:{Accept:"application/json"}});let e=await t(n),o=await e.text(),i=JSON.parse(o,r.reviver);return e.with({body:i})}}function k(r){return async(n,t)=>{let e=await t(n);if(!e.ok)if(r&&typeof r[e.status]=="function")e=r[e.status].apply(e,n);else throw new Error(e.status+": "+e.statusText,{cause:e});return e}}var A=Object.assign({},j,{mw:{jsonmw:x,thrower:k}});window.metro=A;var V=A;})();
//# sourceMappingURL=everything.min.js.map
