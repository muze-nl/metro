function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var t=globalThis,r={},o={},n=t.parcelRequire94c2;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},t.parcelRequire94c2=n),(0,n.register)("hkeot",function(t,r){e(t.exports,"symbols",()=>n),e(t.exports,"request",()=>c),e(t.exports,"metroError",()=>w),e(t.exports,"response",()=>u),e(t.exports,"client",()=>a),e(t.exports,"url",()=>p),e(t.exports,"formdata",()=>function e(...t){var r=new FormData;for(let e of t)if(e instanceof FormData)for(let t of e.entries())r.append(t[0],t[1]);else if(e&&"object"==typeof e)for(let t of Object.entries(e))if(Array.isArray(t[1]))for(let e of t[1])r.append(t[0],e);else r.append(t[0],t[1]);else throw new w("metro.formdata: unknown option type, only FormData or Object supported",e);return Object.freeze(r),new Proxy(r,{get:(t,r,o)=>{switch(r){case n.isProxy:return!0;case n.source:return t;case"with":return function(...r){return e(t,...r)}}return t[r]}})}),e(t.exports,"trace",()=>m);let o="https://metro.muze.nl/details/",n={isProxy:Symbol("isProxy"),source:Symbol("source")};class s{#e={url:"undefined"!=typeof window?window.location:"https://localhost"};#t=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...e){for(let t of e)if("string"==typeof t||t instanceof String)this.#e.url=""+t;else if(t instanceof s)Object.assign(this.#e,t.#e);else if(t instanceof Function)this.#r([t]);else if(t&&"object"==typeof t)for(let e in t)"middlewares"==e?this.#r(t[e]):"function"==typeof t[e]?this.#e[e]=t[e](this.#e[e],this.#e):this.#e[e]=t[e];for(let e of(this.#e.verbs&&(this.#t=this.#e.verbs,delete this.#e.verbs),this.#t))this[e]=async function(...t){return this.fetch(c(this.#e,...t,{method:e.toUpperCase()}))};Object.freeze(this)}#r(e){"function"==typeof e&&(e=[e]);let t=e.findIndex(e=>"function"!=typeof e);if(t>=0)throw w("metro.client: middlewares must be a function or an array of functions "+o+"client/invalid-middlewares-value/",e[t]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(e)}fetch(e,t){let r;if(!(e=c(e,t)).url)throw w("metro.client."+e.method.toLowerCase()+": Missing url parameter "+o+"client/missing-url-param/",e);if(t||(t={}),"object"!=typeof t||Array.isArray(t)||t instanceof String)throw w("metro.client.fetch: Options is not an object");let a=[async function(e){return e[n.isProxy]&&(e=e[n.source]),u(await fetch(e))}].concat(this.#e?.middlewares?.slice()||[]);for(let e of(t=Object.assign({},this.#e,t),a))r=function(e,t){return async function(r){let o;let n=Object.values(s.tracers);for(let e of n)e.request&&e.request.call(e,r,t);for(let s of(o=await t(r,e),n))s.response&&s.response.call(s,o,t);return o}}(r,e);return r(e)}with(...e){return new s(this,...e)}}function a(...e){return new s(...e)}function i(e,t){let r=t.body;return r||(null===e?r=new ReadableStream:e instanceof ReadableStream?r=e:e instanceof Blob?r=e.stream():r=new ReadableStream({start(t){let r;switch(typeof e){case"object":if("function"==typeof e.toString)r=e.toString();else if(e instanceof FormData)r=new URLSearchParams(e).toString();else if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))r=e;else throw w("Cannot convert body to ReadableStream",e);break;case"string":case"number":case"boolean":r=e;break;default:throw w("Cannot convert body to ReadableStream",e)}t.enqueue(r),t.close()}})),new Proxy(r,{get(t,r,o){switch(r){case n.isProxy:return!0;case n.source:return e;case"toString":return function(){return""+e}}return"object"==typeof e&&r in e?"function"==typeof e[r]?function(...t){return e[r].apply(e,t)}:e[r]:r in t&&"toString"!=r?"function"==typeof t[r]?function(...e){return t[r].apply(t,e)}:t[r]:void 0},has:(t,r)=>r in e,ownKeys:t=>Reflect.ownKeys(e),getOwnPropertyDescriptor:(t,r)=>Object.getOwnPropertyDescriptor(e,r)})}function c(...e){let t={url:"undefined"!=typeof window?window.location:"https://localhost/",duplex:"half"};for(let r of e)"string"==typeof r||r instanceof URL||r instanceof URLSearchParams?t.url=p(t.url,r):r&&(r instanceof FormData||r instanceof ReadableStream||r instanceof Blob||r instanceof ArrayBuffer||r instanceof DataView)?t.body=r:r&&"object"==typeof r&&Object.assign(t,function(e,t){let r=t||{};for(let o of(!r.url&&t.url&&(r.url=t.url),["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]))if("function"==typeof e[o])e[o](r[o],r);else if(void 0!==e[o]){if("url"==o)r.url=p(r.url,e.url);else if("headers"==o)for(let[o,n]of(r.headers=new Headers(t.headers),e.headers instanceof Headers||(e.headers=new Headers(e.headers)),e.headers.entries()))r.headers.set(o,n);else r[o]=e[o]}return r}(r,t));let r=t.body;!r||"object"!=typeof r||r instanceof String||r instanceof ReadableStream||r instanceof Blob||r instanceof ArrayBuffer||r instanceof DataView||r instanceof FormData||r instanceof URLSearchParams||"undefined"!=typeof TypedArray&&r instanceof TypedArray||(t.body=JSON.stringify(r));let o=new Request(t.url,t);return Object.freeze(o),new Proxy(o,{get(e,t,o){switch(t){case n.source:return e;case n.isProxy:return!0;case"with":return function(...t){return r&&t.unshift({body:r}),c(e,...t)};case"toString":case"toJSON":return function(){return e[t].apply(e)};case"blob":case"text":case"json":return function(){return e[t].apply(e)};case"body":if(r||(r=e.body),r){if(r[n.isProxy])return r;return i(r,e)}}return e[t]}})}function f(e,t){let r=t||{};for(let o of(!r.url&&t.url&&(r.url=t.url),["status","statusText","headers","body","url","type","redirected"]))"function"==typeof e[o]?e[o](r[o],r):void 0!==e[o]&&("url"==o?r.url=new URL(e.url,r.url||"https://localhost/"):r[o]=e[o]);return r}function u(...e){let t={};for(let r of e)"string"==typeof r?t.body=r:r instanceof Response?Object.assign(t,f(r,t)):r&&"object"==typeof r&&(r instanceof FormData||r instanceof Blob||r instanceof ArrayBuffer||r instanceof DataView||r instanceof ReadableStream||r instanceof URLSearchParams||r instanceof String||"undefined"!=typeof TypedArray&&r instanceof TypedArray?t.body=r:Object.assign(t,f(r,t)));let r=new Response(t.body,t);return Object.freeze(r),new Proxy(r,{get(e,r,o){switch(r){case n.isProxy:return!0;case n.source:return e;case"with":return function(...t){return u(e,...t)};case"body":if(!t.body)return i("",e);if(t.body[n.isProxy])return t.body;return i(t.body,e);case"ok":return e.status>=200&&e.status<400;case"headers":return e.headers;default:if(r in t&&"toString"!=r)return t[r];if(r in e&&"toString"!=r){if("function"==typeof e[r])return function(...t){return e[r].apply(e,t)};return e[r]}}}})}function l(e,t){"function"==typeof t?t(e.searchParams,e):(t=new URLSearchParams(t)).forEach((t,r)=>{e.searchParams.append(r,t)})}function p(...e){let t=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],r=new URL("https://localhost/");for(let n of e)if("string"==typeof n||n instanceof String)r=new URL(n,r);else if(n instanceof URL||"undefined"!=typeof Location&&n instanceof Location)r=new URL(n);else if(n instanceof URLSearchParams)l(r,n);else if(n&&"object"==typeof n)for(let s in n)if("search"==s)"function"==typeof n.search?n.search(r.search,r):r.search=new URLSearchParams(n.search);else if("searchParams"==s)l(r,n.searchParams);else{if(!t.includes(s))throw w("metro.url: unknown url parameter "+o+"url/unknown-param-name/",s);if("function"==typeof n[s])n[s](r[s],r);else if("string"==typeof n[s]||n[s]instanceof String||"number"==typeof n[s]||n[s]instanceof Number||"boolean"==typeof n[s]||n[s]instanceof Boolean)r[s]=""+n[s];else if("object"==typeof n[s]&&n[s].toString)r[s]=n[s].toString();else throw w("metro.url: unsupported value for "+s+" "+o+"url/unsupported-param-value/",e[s])}else throw w("metro.url: unsupported option value "+o+"url/unsupported-option-value/",n);return Object.freeze(r),new Proxy(r,{get(e,t,r){switch(t){case n.isProxy:return!0;case n.source:return e;case"with":return function(...t){return p(e,...t)};case"toString":case"toJSON":return function(){return e[t]()}}return e[t]}})}let d=(e,...t)=>{console.error("Ⓜ️  ",e,...t)},y=(e,...t)=>{console.info("Ⓜ️  ",e,...t)},h=e=>{console.group("Ⓜ️  "+e)},b=e=>{console.groupEnd("Ⓜ️  "+e)};function w(e,...t){return d(e,...t),Error(e,...t)}let m={add(e,t){s.tracers[e]=t},delete(e){delete s.tracers[e]},clear(){s.tracers={}},group(){let e=0;return{request:(t,r)=>{h(++e),y(t?.url,t,r)},response:(t,r)=>{y(t?.body?t.body[n.source]:null,t,r),b(e),e--}}}}});var s=(n("hkeot"),n("hkeot"));n("hkeot"),window.metro=Object.assign({},s,{mw:{jsonmw:function(e){return e=Object.assign({reviver:null,replacer:null,space:""},e),async(t,r)=>{["POST","PUT","PATCH","QUERY"].includes(t.method)?(t=t.with({headers:{"Content-Type":"application/json",Accept:"application/json"}})).body&&"object"==typeof t.body[s.symbols.source]&&(t=t.with({body:JSON.stringify(t.body[s.symbols.source],e.replacer,e.space)})):t=t.with({headers:{Accept:"application/json"}});let o=await r(t),n=JSON.parse(await o.text(),e.reviver);return o.with({body:n})}},thrower:function(e){return async(t,r)=>{let o=await r(t);if(!o.ok){if(e&&"function"==typeof e[o.status])o=e[o.status].apply(o,t);else throw Error(o.status+": "+o.statusText,{cause:o})}return o}}}});
//# sourceMappingURL=everything.js.map
