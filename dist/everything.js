function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=globalThis,n={},o={},s=t.parcelRequireea2c;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequireea2c=s),(0,s.register)("hkeot",function(t,n){e(t.exports,"symbols",()=>s),e(t.exports,"request",()=>f),e(t.exports,"metroError",()=>m),e(t.exports,"response",()=>l),e(t.exports,"client",()=>i),e(t.exports,"url",()=>d),e(t.exports,"formdata",()=>function e(...t){var n=new FormData;for(let e of t)if(e instanceof FormData)for(let t of e.entries())n.append(t[0],t[1]);else if(e&&"object"==typeof e)for(let t of Object.entries(e))if(Array.isArray(t[1]))for(let e of t[1])n.append(t[0],e);else n.append(t[0],t[1]);else throw new m("metro.formdata: unknown option type, only FormData or Object supported",e);return Object.freeze(n),new Proxy(n,{get:(t,n,o)=>{switch(n){case s.isProxy:return!0;case s.source:return t;case"with":return function(...n){return e(t,...n)};case"toString":case"toJSON":return function(){return t[n]()}}return t[n]}})}),e(t.exports,"trace",()=>g);let o="https://metro.muze.nl/details/",s={isProxy:Symbol("isProxy"),source:Symbol("source")};class a{#e={url:"undefined"!=typeof window?window.location:"https://localhost"};#t=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...e){for(let t of e)if("string"==typeof t||t instanceof String)this.#e.url=""+t;else if(t instanceof a)Object.assign(this.#e,t.#e);else if(t instanceof Function)this.#r([t]);else if(t&&"object"==typeof t)for(let e in t)"middlewares"==e?this.#r(t[e]):"function"==typeof t[e]?this.#e[e]=t[e](this.#e[e],this.#e):this.#e[e]=t[e];for(let e of(this.#e.verbs&&(this.#t=this.#e.verbs,delete this.#e.verbs),this.#t))this[e]=async function(...t){return this.#n(f(this.#e,...t,{method:e.toUpperCase()}))};Object.freeze(this)}#r(e){"function"==typeof e&&(e=[e]);let t=e.findIndex(e=>"function"!=typeof e);if(t>=0)throw m("metro.client: middlewares must be a function or an array of functions "+o+"client/invalid-middlewares-value/",e[t]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(e)}#n(e){let t;if(!e.url)throw m("metro.client."+r.method.toLowerCase()+": Missing url parameter "+o+"client/missing-url-param/",e);let n=[async e=>(e[s.isProxy]&&(e=e[s.source]),l(await fetch(e)))].concat(this.#e?.middlewares?.slice()||[]);for(let e of(this.#e,n))t=function(e,t){return async function(n){let o;let s=Object.values(a.tracers);for(let e of s)e.request&&e.request.call(e,n);for(let a of(o=await t(n,e),s))a.response&&a.response.call(a,o);return o}}(t,e);return t(e)}with(...e){return new a(this,...e)}}function i(...e){return new a(...e)}function c(e,t){let n=t.body;return n||(null===e?n=new ReadableStream:e instanceof ReadableStream?n=e:e instanceof Blob?n=e.stream():n=new ReadableStream({start(t){let n;switch(typeof e){case"object":if("function"==typeof e.toString)n=e.toString();else if(e instanceof FormData)n=new URLSearchParams(e).toString();else if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))n=e;else throw m("Cannot convert body to ReadableStream",e);break;case"string":case"number":case"boolean":n=e;break;default:throw m("Cannot convert body to ReadableStream",e)}t.enqueue(n),t.close()}})),new Proxy(n,{get(t,n,o){switch(n){case s.isProxy:return!0;case s.source:return e;case"toString":return function(){return""+e}}return"object"==typeof e&&n in e?"function"==typeof e[n]?function(...t){return e[n].apply(e,t)}:e[n]:n in t&&"toString"!=n?"function"==typeof t[n]?function(...e){return t[n].apply(t,e)}:t[n]:void 0},has:(t,n)=>n in e,ownKeys:t=>Reflect.ownKeys(e),getOwnPropertyDescriptor:(t,n)=>Object.getOwnPropertyDescriptor(e,n)})}function f(...e){let t={url:"undefined"!=typeof window?window.location:"https://localhost/",duplex:"half"};for(let n of e)"string"==typeof n||n instanceof URL||n instanceof URLSearchParams?t.url=d(t.url,n):n&&(n instanceof FormData||n instanceof ReadableStream||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView)?t.body=n:n&&"object"==typeof n&&Object.assign(t,function(e,t){let n=t||{};for(let o of(!n.url&&t.url&&(n.url=t.url),["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]))if("function"==typeof e[o])e[o](n[o],n);else if(void 0!==e[o]){if("url"==o)n.url=d(n.url,e.url);else if("headers"==o)for(let[o,s]of(n.headers=new Headers(t.headers),e.headers instanceof Headers||(e.headers=new Headers(e.headers)),e.headers.entries()))n.headers.set(o,s);else n[o]=e[o]}return n}(n,t));let n=t.body;!n||"object"!=typeof n||n instanceof String||n instanceof ReadableStream||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView||n instanceof FormData||n instanceof URLSearchParams||"undefined"!=typeof TypedArray&&n instanceof TypedArray||(t.body=JSON.stringify(n));let o=new Request(t.url,t);return Object.freeze(o),new Proxy(o,{get(e,t,o){switch(t){case s.source:return e;case s.isProxy:return!0;case"with":return function(...t){return f(e,...t)};case"toString":case"toJSON":case"blob":case"text":case"json":return function(){return e[t].apply(e)};case"body":if(n||(n=e.body),n){if(n[s.isProxy])return n;return c(n,e)}}return e[t]}})}function u(e,t){let n=t||{};for(let o of(!n.url&&t.url&&(n.url=t.url),["status","statusText","headers","body","url","type","redirected"]))"function"==typeof e[o]?e[o](n[o],n):void 0!==e[o]&&("url"==o?n.url=new URL(e.url,n.url||"https://localhost/"):n[o]=e[o]);return n}function l(...e){let t={};for(let n of e)"string"==typeof n?t.body=n:n instanceof Response?Object.assign(t,u(n,t)):n&&"object"==typeof n&&(n instanceof FormData||n instanceof Blob||n instanceof ArrayBuffer||n instanceof DataView||n instanceof ReadableStream||n instanceof URLSearchParams||n instanceof String||"undefined"!=typeof TypedArray&&n instanceof TypedArray?t.body=n:Object.assign(t,u(n,t)));let n=new Response(t.body,t);return Object.freeze(n),new Proxy(n,{get(e,n,o){switch(n){case s.isProxy:return!0;case s.source:return e;case"with":return function(...t){return l(e,...t)};case"body":if(!t.body)return c("",e);if(t.body[s.isProxy])return t.body;return c(t.body,e);case"ok":return e.status>=200&&e.status<400;case"headers":return e.headers;default:if(n in t&&"toString"!=n)return t[n];if(n in e&&"toString"!=n){if("function"==typeof e[n])return function(...t){return e[n].apply(e,t)};return e[n]}}}})}function p(e,t){"function"==typeof t?t(e.searchParams,e):(t=new URLSearchParams(t)).forEach((t,n)=>{e.searchParams.append(n,t)})}function d(...e){let t=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],n=new URL("https://localhost/");for(let s of e)if("string"==typeof s||s instanceof String)n=new URL(s,n);else if(s instanceof URL||"undefined"!=typeof Location&&s instanceof Location)n=new URL(s);else if(s instanceof URLSearchParams)p(n,s);else if(s&&"object"==typeof s)for(let a in s)if("search"==a)"function"==typeof s.search?s.search(n.search,n):n.search=new URLSearchParams(s.search);else if("searchParams"==a)p(n,s.searchParams);else{if(!t.includes(a))throw m("metro.url: unknown url parameter "+o+"url/unknown-param-name/",a);if("function"==typeof s[a])s[a](n[a],n);else if("string"==typeof s[a]||s[a]instanceof String||"number"==typeof s[a]||s[a]instanceof Number||"boolean"==typeof s[a]||s[a]instanceof Boolean)n[a]=""+s[a];else if("object"==typeof s[a]&&s[a].toString)n[a]=s[a].toString();else throw m("metro.url: unsupported value for "+a+" "+o+"url/unsupported-param-value/",e[a])}else throw m("metro.url: unsupported option value "+o+"url/unsupported-option-value/",s);return Object.freeze(n),new Proxy(n,{get(e,t,n){switch(t){case s.isProxy:return!0;case s.source:return e;case"with":return function(...t){return d(e,...t)};case"toString":case"toJSON":return function(){return e[t]()}}return e[t]}})}let h=(e,...t)=>{console.error("Ⓜ️  ",e,...t)},y=(e,...t)=>{console.info("Ⓜ️  ",e,...t)},b=e=>{console.group("Ⓜ️  "+e)},w=e=>{console.groupEnd("Ⓜ️  "+e)};function m(e,...t){return h(e,...t),Error(e,...t)}let g={add(e,t){a.tracers[e]=t},delete(e){delete a.tracers[e]},clear(){a.tracers={}},group(){let e=0;return{request:t=>{b(++e),y(t?.url,t)},response:t=>{y(t?.body?t.body[s.source]:null,t),w(e),e--}}}}});var a=s("hkeot"),i={};e(i,"enable",()=>f),e(i,"disable",()=>u),e(i,"fails",()=>l),e(i,"check",()=>p),e(i,"optional",()=>d),e(i,"oneOf",()=>h);let c=!1;function f(){c=!0}function u(){c=!1}function l(e,t){let n=[];if(t instanceof RegExp){if(Array.isArray(e)){let o=e.findIndex(e=>l(e,t));o>-1&&n.push("data["+o+"] does not match pattern")}else t.test(e)||n.push("data does not match pattern "+t)}else if(t instanceof Function)t(e)&&n.push("data does not match function");else if(t&&"object"==typeof t){if(Array.isArray(e)){let o=e.findIndex(e=>l(e,t));o>-1&&n.push("data["+o+"] does not match pattern")}else if(e&&"object"==typeof e){e instanceof URLSearchParams&&(e=Object.fromEntries(e));let o=n[n.length-1];for(let[s,a]of Object.entries(t)){let t=l(e[s],a);t&&(o&&"string"!=typeof o||(o={},n.push(o)),o[s]=t.problems)}}else n.push("data is not an object, pattern is")}else t!=e&&n.push("data does not equal "+t);return!!n.length&&n}function p(e,t){if(!c)return;let n=l(e,t);if(n)throw new y(n,e)}function d(e){return function(t){return null!=t&&void 0!==t&&l(t,e)}}function h(...e){return function(t){for(let n of e)if(!l(t,n))return!1;return["data does not match oneOf patterns"]}}class y{constructor(e,...t){this.problems=e,this.details=t,console.trace()}}var a=s("hkeot");s("hkeot"),window.assert=i,window.metro=Object.assign({},a,{mw:{jsonmw:function(e){return e=Object.assign({reviver:null,replacer:null,space:""},e),async(t,n)=>{["POST","PUT","PATCH","QUERY"].includes(t.method)?(t=t.with({headers:{"Content-Type":"application/json",Accept:"application/json"}})).body&&"object"==typeof t.body[a.symbols.source]&&(t=t.with({body:JSON.stringify(t.body[a.symbols.source],e.replacer,e.space)})):t=t.with({headers:{Accept:"application/json"}});let o=await n(t),s=JSON.parse(await o.text(),e.reviver);return o.with({body:s})}},thrower:function(e){return async(t,n)=>{let o=await n(t);if(!o.ok){if(e&&"function"==typeof e[o.status])o=e[o.status].apply(o,t);else throw Error(o.status+": "+o.statusText,{cause:o})}return o}}}});
//# sourceMappingURL=everything.js.map
